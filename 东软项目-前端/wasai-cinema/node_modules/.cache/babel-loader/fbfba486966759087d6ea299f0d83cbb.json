{"ast":null,"code":"\"use strict\";\n\nvar _typeof = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/typeof.js\").default;\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar sequences = {};\nvar DEFAULTS = {\n  timestamp: function timestamp() {\n    return function () {\n      return Date.now();\n    };\n  },\n  datetime: function datetime() {\n    return function () {\n      return new Date().toISOString();\n    };\n  },\n  date: function date() {\n    return function () {\n      return new Date().toISOString().slice(0, 10);\n    };\n  },\n  time: function time() {\n    return function () {\n      return new Date().toISOString().slice(11);\n    };\n  },\n  random: function random() {\n    return function () {\n      return Math.random();\n    };\n  },\n  randomint: function randomint(args) {\n    var _a;\n\n    var max = (_a = args === null || args === void 0 ? void 0 : args.max) !== null && _a !== void 0 ? _a : 2;\n    return function () {\n      return Math.floor(Math.random() * max);\n    };\n  },\n  seq: function seq(args) {\n    var _a;\n\n    var name = (_a = args === null || args === void 0 ? void 0 : args.name) !== null && _a !== void 0 ? _a : \"\";\n    sequences[name] || (sequences[name] = 0);\n    return function () {\n      return sequences[name]++;\n    };\n  }\n};\nvar getDef = Object.assign(_getDef, {\n  DEFAULTS: DEFAULTS\n});\n\nfunction _getDef() {\n  return {\n    keyword: \"dynamicDefaults\",\n    type: \"object\",\n    schemaType: [\"string\", \"object\"],\n    modifying: true,\n    valid: true,\n    compile: function compile(schema, _parentSchema, it) {\n      if (!it.opts.useDefaults || it.compositeRule) return function () {\n        return true;\n      };\n      var fs = {};\n\n      for (var key in schema) {\n        fs[key] = getDefault(schema[key]);\n      }\n\n      var empty = it.opts.useDefaults === \"empty\";\n      return function (data) {\n        for (var prop in schema) {\n          if (data[prop] === undefined || empty && (data[prop] === null || data[prop] === \"\")) {\n            data[prop] = fs[prop]();\n          }\n        }\n\n        return true;\n      };\n    },\n    metaSchema: {\n      type: \"object\",\n      additionalProperties: {\n        anyOf: [{\n          type: \"string\"\n        }, {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"func\", \"args\"],\n          properties: {\n            func: {\n              type: \"string\"\n            },\n            args: {\n              type: \"object\"\n            }\n          }\n        }]\n      }\n    }\n  };\n}\n\nfunction getDefault(d) {\n  return _typeof(d) == \"object\" ? getObjDefault(d) : getStrDefault(d);\n}\n\nfunction getObjDefault(_ref) {\n  var func = _ref.func,\n      args = _ref.args;\n  var def = DEFAULTS[func];\n  assertDefined(func, def);\n  return def(args);\n}\n\nfunction getStrDefault() {\n  var d = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var def = DEFAULTS[d];\n  assertDefined(d, def);\n  return def();\n}\n\nfunction assertDefined(name, def) {\n  if (!def) throw new Error(\"invalid \\\"dynamicDefaults\\\" keyword property value: \".concat(name));\n}\n\nexports.default = getDef;\nmodule.exports = getDef;","map":{"version":3,"mappings":"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","names":["sequences","DEFAULTS","timestamp","Date","now","datetime","toISOString","date","slice","time","random","Math","randomint","args","max","_a","floor","seq","name","getDef","Object","assign","_getDef","keyword","type","schemaType","modifying","valid","compile","schema","_parentSchema","it","opts","useDefaults","compositeRule","fs","key","getDefault","empty","data","prop","undefined","metaSchema","additionalProperties","anyOf","required","properties","func","d","getObjDefault","getStrDefault","def","assertDefined","Error","exports","module"],"sourceRoot":"","sources":["../../src/definitions/dynamicDefaults.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}