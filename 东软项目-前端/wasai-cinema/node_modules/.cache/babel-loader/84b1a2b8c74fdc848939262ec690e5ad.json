{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { QueryFilmList, ListAllPost, QueryHotRank } from \"@/api/film\";\nimport { parseTime } from \"@/plugins/DateTran\"; //日期格式转化\n\nexport default {\n  data: function data() {\n    return {\n      //轮播图\n      posterList: [{\n        url: \"\"\n      }],\n      //左侧热门电影区\n      movie_area: [{\n        name: \"XXXX\",\n        cover: \"\",\n        hot: \"xxx\",\n        releaseTime: \"\"\n      }],\n      //右侧榜单\n      hot: [{\n        name: \"XXXX\",\n        cover: \"\",\n        hot: \"xxx\"\n      }, {\n        name: \"XXXX\",\n        cover: \"\",\n        hot: \"xxx\"\n      }, {\n        name: \"XXXX\",\n        cover: \"\",\n        hot: \"xxx\"\n      }]\n    };\n  },\n  methods: {\n    //点击电影卡片的跳转\n    Movie_card_click: function Movie_card_click(item) {\n      this.$store.state.navnum = 1;\n      this.$store.state.color2.color = \"blue\";\n      this.$store.state.color1.color = \"#5b5d63\";\n      this.$store.state.color3.color = \"#5b5d63\";\n      this.$store.state.color4.color = \"#5b5d63\";\n      this.$router.push(\"/film_detail?fid=\" + item.id);\n    },\n    //海报\n    PosterQuery: function PosterQuery() {\n      var _this = this;\n\n      ListAllPost().then(function (res) {\n        if (res.code == 200) {\n          _this.posterList = res.data;\n        }\n      });\n    },\n    //排行查询\n    RankQuery: function RankQuery() {\n      var _this2 = this;\n\n      this.hot = undefined;\n      this.hot = new Array();\n      QueryHotRank().then(function (res) {\n        if (res.code == 200) {\n          _this2.hot = res.data; //转化其中显示的日期\n\n          for (var i = 0; i < _this2.hot.length; i++) {\n            _this2.hot[i].releaseTime = parseTime(new Date(_this2.hot[i].releaseTime), \"{y}-{m}-{d}\");\n          }\n\n          ;\n          console.log(_this2.hot);\n        }\n\n        if (_this2.hot.length < 10) {\n          for (var i = _this2.hot.length; i < 10; i++) {\n            _this2.hot.push({\n              name: \"XXXX\",\n              cover: \"https://s1.ax1x.com/2022/03/31/qRtZDg.gif\",\n              hot: \"xxx\"\n            });\n          }\n        }\n      });\n    }\n  },\n  // 创建前方法，实现相应页面LINK变蓝\n  beforeCreate: function beforeCreate() {\n    this.$store.state.navnum = 0;\n    this.$store.state.color1.color = \"blue\";\n    this.$store.state.color4.color = \"#5b5d63\";\n    this.$store.state.color2.color = \"#5b5d63\";\n    this.$store.state.color3.color = \"#5b5d63\";\n  },\n  created: function created() {\n    var _this3 = this;\n\n    console.log(\"created\"); // 热门接口\n\n    QueryHotRank().then(function (res) {\n      if (res.code == 200) {\n        _this3.movie_area = res.data;\n\n        for (var i = 0; i < _this3.movie_area.length; i++) {\n          _this3.movie_area[i].releaseTime = parseTime(new Date(_this3.movie_area[i].releaseTime), \"{y}-{m}-{d}\");\n        }\n\n        ;\n      }\n    }); //海报图POST\n  },\n  mounted: function mounted() {\n    //海报图POST\n    this.PosterQuery(); //测试用\n    // this.$axios\n    //    .get(\"http://localhost:8081/api/post\")\n    //    .then((res)=>\n    //      {\n    //        console.log(res);\n    //          if(res.data.code==200){\n    //              console.log(\"wtffff\");\n    //               this.posterList=res.data.data;\n    //          }\n    //      });\n    //热门榜单\n\n    this.RankQuery();\n    console.log(this.posterList);\n  },\n  Updated: function Updated() {//海报图POST\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA,+C,CAAA;;AACA;AACAA,MADA,kBACA;AACA;AACA;AACAC;AAAAC;AAAA,QAFA;AAGA;AACAC;AAAAC;AAAAC;AAAAC;AAAAC;AAAA,QAJA;AAKA;AACAD,YACA;AAAAF;AAAAC;AAAAC;AAAA,OADA,EAEA;AAAAF;AAAAC;AAAAC;AAAA,OAFA,EAGA;AAAAF;AAAAC;AAAAC;AAAA,OAHA;AANA;AAYA,GAdA;AAeAE;AACA;AACAC,oBAFA,4BAEAC,IAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KATA;AAUA;AACAC,eAXA,yBAWA;AAAA;;AACAC;AACA;AACA;AACA;AACA,OAJA;AAKA,KAjBA;AAkBA;AACAC,aAnBA,uBAmBA;AAAA;;AACA;AACA;AACAC;AACA;AACA,gCADA,CAEA;;AACA;AACA;AACA;;AAAA;AACAC;AACA;;AACA;AACA;AACA;AACAX,0BADA;AAEAC,gEAFA;AAGAC;AAHA;AAKA;AACA;AACA,OAlBA;AAmBA;AAzCA,GAfA;AA0DA;AACAU;AACA;AACA;AACA;AACA;AACA;AACA,GAjEA;AAkEAC,SAlEA,qBAkEA;AAAA;;AACAF,2BADA,CAEA;;AACAD;AACA;AACA;;AACA;AACA;AACA;;AAAA;AACA;AACA,KAPA,EAHA,CAWA;AACA,GA9EA;AA+EAI,SA/EA,qBA+EA;AACA;AACA,uBAFA,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACAH;AACA,GAhGA;AAiGAI,SAjGA,qBAiGA,CACA;AACA;AAnGA","names":["data","posterList","url","movie_area","name","cover","hot","releaseTime","methods","Movie_card_click","item","PosterQuery","ListAllPost","RankQuery","QueryHotRank","console","beforeCreate","created","mounted","Updated"],"sourceRoot":"src/views","sources":["home.vue"],"sourcesContent":["<template>\r\n  <div class=\"home\">\r\n    <!-- 轮播图 -->\r\n    <div class=\"post\">\r\n      <el-carousel height=\"500px\" width=\"1500px\">\r\n        <el-carousel-item v-for=\"(item, index) in posterList\" :key=\"index\">\r\n          <el-image :src=\"item.url\" alt=\"\" style=\"width: 1500px; height: 500px\"></el-image>\r\n        </el-carousel-item>\r\n      </el-carousel>\r\n    </div>\r\n    <br /><br />\r\n    <!-- 轮播图结束 -->\r\n    <el-container>\r\n      <!-- 左侧电影区 -->\r\n      <el-main>\r\n        <h2 class=\"sidetitle\">热门电影</h2>\r\n        <br />\r\n        <el-col :span=\"5\" v-for=\"(item, index) in movie_area\" :key=\"index\" :offset=\"1\" style=\"margin-top: 20px\">\r\n          <div @click=\"Movie_card_click(item)\">\r\n            <el-card :body-style=\"{ padding: '13px 0px' }\" style=\"margin-bottom: 30px; height: 330px\">\r\n              <img :src=\"item.cover\" style=\"width: 170px; height: 250px\" alt=\"ERROR\" title=\"\" />\r\n              <div style=\"padding: 5px\">\r\n                <span class=\"showTagName\">{{ item.name }}</span>\r\n                <div class=\"movie_info\">\r\n                  <div class=\"movie_info_wanttosee\">{{ item.hot }}人想看</div>\r\n                  <div class=\"movie_info_on\">\r\n                    {{ item.releaseTime }}&nbsp;上映\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </el-card>\r\n          </div>\r\n        </el-col>\r\n      </el-main>\r\n      <!-- 左侧电影区结束 -->\r\n      <!-- 右侧排行区 -->\r\n      <el-aside><span class=\"hot_title\">热门榜单TOP10</span>\r\n        <div class=\"top1\" style=\"margin-top: 30px\">\r\n          <div @click=\"Movie_card_click(hot[0])\">\r\n            <div class=\"top_rank_num\">1</div>\r\n            <img width=\"120\" :src=\"hot[0].cover\" alt=\"ERROR\" style=\"float: left\" />\r\n            <span class=\"top1_text1\">{{ hot[0].name }}</span><br />\r\n            <span class=\"top1_text2\">上映时间:{{ hot[0].releaseTime }}</span><br />\r\n            <span class=\"top1_text3\">热度值:{{ hot[0].hot }}</span><br />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"top2\" style=\"margin-left: -50px\">\r\n          <div @click=\"Movie_card_click(hot[1])\">\r\n            <div class=\"top_rank_num\">2</div>\r\n            <img width=\"150\" height=\"180\" :src=\"hot[1].cover\" alt=\"ERROR\" style=\"float: left\" />\r\n            <span class=\"top2_text1\">{{ hot[1].name }}</span><br />\r\n            <span class=\"top2_text2\">热度值:{{ hot[1].hot }}</span><br />\r\n          </div>\r\n        </div>\r\n        <div class=\"top2\" style=\"margin-left: 8px\">\r\n          <div @click=\"Movie_card_click(hot[2])\">\r\n            <div class=\"top_rank_num\">3</div>\r\n            <img width=\"150\" height=\"180\" :src=\"hot[2].cover\" alt=\"ERROR\" style=\"float: left\" />\r\n            <span class=\"top2_text1\">{{ hot[2].name }}</span><br />\r\n            <span class=\"top2_text2\">热度值:{{ hot[2].hot }}</span><br />\r\n          </div>\r\n        </div>\r\n        <br />\r\n        <!-- 第四位开始 -->\r\n        <div class=\"top_more\">\r\n          <el-row v-for=\"(item, index) in hot.slice(3)\" :key=\"index\" :offset=\"1\"\r\n            style=\"height: 50px; line-height: 50px\">\r\n            <span class=\"top_more_span1\"><span class=\"top_more_span2\">{{ index + 4 }}</span>&nbsp;{{ item.name }}</span>\r\n            <span class=\"top_more_span3\">热度值:{{ item.hot }}</span>\r\n          </el-row>\r\n        </div>\r\n      </el-aside>\r\n      <!-- 右侧排行区结束 -->\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { QueryFilmList, ListAllPost, QueryHotRank } from \"@/api/film\";\r\nimport { parseTime } from \"@/plugins/DateTran\";//日期格式转化\r\nexport default {\r\n  data() {\r\n    return {\r\n      //轮播图\r\n      posterList: [{ url: \"\" }],\r\n      //左侧热门电影区\r\n      movie_area: [{ name: \"XXXX\", cover: \"\", hot: \"xxx\", releaseTime: \"\" }],\r\n      //右侧榜单\r\n      hot: [\r\n        { name: \"XXXX\", cover: \"\", hot: \"xxx\" },\r\n        { name: \"XXXX\", cover: \"\", hot: \"xxx\" },\r\n        { name: \"XXXX\", cover: \"\", hot: \"xxx\" },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    //点击电影卡片的跳转\r\n    Movie_card_click(item) {\r\n      this.$store.state.navnum = 1;\r\n      this.$store.state.color2.color = \"blue\";\r\n      this.$store.state.color1.color = \"#5b5d63\";\r\n      this.$store.state.color3.color = \"#5b5d63\";\r\n      this.$store.state.color4.color = \"#5b5d63\";\r\n      this.$router.push(\"/film_detail?fid=\" + item.id);\r\n    },\r\n    //海报\r\n    PosterQuery() {\r\n      ListAllPost().then((res) => {\r\n        if (res.code == 200) {\r\n          this.posterList = res.data;\r\n        }\r\n      });\r\n    },\r\n    //排行查询\r\n    RankQuery() {\r\n      this.hot = undefined;\r\n      this.hot = new Array();\r\n      QueryHotRank().then((res) => {\r\n        if (res.code == 200) {\r\n          this.hot = res.data;\r\n          //转化其中显示的日期\r\n          for (var i = 0; i < this.hot.length; i++) {\r\n            this.hot[i].releaseTime = parseTime(new Date(this.hot[i].releaseTime), \"{y}-{m}-{d}\");\r\n          };\r\n          console.log(this.hot);\r\n        }\r\n        if (this.hot.length < 10) {\r\n          for (var i = this.hot.length; i < 10; i++) {\r\n            this.hot.push({\r\n              name: \"XXXX\",\r\n              cover: \"https://s1.ax1x.com/2022/03/31/qRtZDg.gif\",\r\n              hot: \"xxx\",\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n  },\r\n  // 创建前方法，实现相应页面LINK变蓝\r\n  beforeCreate: function () {\r\n    this.$store.state.navnum = 0;\r\n    this.$store.state.color1.color = \"blue\";\r\n    this.$store.state.color4.color = \"#5b5d63\";\r\n    this.$store.state.color2.color = \"#5b5d63\";\r\n    this.$store.state.color3.color = \"#5b5d63\";\r\n  },\r\n  created() {\r\n    console.log(\"created\");\r\n    // 热门接口\r\n    QueryHotRank().then((res) => {\r\n      if (res.code == 200) {\r\n        this.movie_area = res.data;\r\n        for (var i = 0; i < this.movie_area.length; i++) {\r\n          this.movie_area[i].releaseTime = parseTime(new Date(this.movie_area[i].releaseTime), \"{y}-{m}-{d}\")\r\n        };\r\n      }\r\n    });\r\n    //海报图POST\r\n  },\r\n  mounted() {\r\n    //海报图POST\r\n    this.PosterQuery();\r\n    //测试用\r\n    // this.$axios\r\n    //    .get(\"http://localhost:8081/api/post\")\r\n    //    .then((res)=>\r\n    //      {\r\n    //        console.log(res);\r\n    //          if(res.data.code==200){\r\n    //              console.log(\"wtffff\");\r\n    //               this.posterList=res.data.data;\r\n    //          }\r\n    //      });\r\n    //热门榜单\r\n    this.RankQuery();\r\n    console.log(this.posterList);\r\n  },\r\n  Updated() {\r\n    //海报图POST\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 排行CSS */\r\n.top_rank_num {\r\n  height: 20px;\r\n  width: 20px;\r\n  display: block;\r\n  position: absolute;\r\n  background-color: yellow;\r\n  color: black;\r\n}\r\n\r\n.hot_title {\r\n  display: inline-block;\r\n  text-align: left;\r\n  font-size: 28px;\r\n  color: orange;\r\n  width: 400px;\r\n  padding-left: 30px;\r\n}\r\n\r\n.top1 {\r\n  position: relative;\r\n\r\n  height: 160px;\r\n  width: 300px;\r\n  margin-left: 23px;\r\n  border: 1px solid rgb(231, 231, 231);\r\n  overflow: hidden;\r\n}\r\n\r\n.top1_text1 {\r\n  padding-top: 20px;\r\n  display: block;\r\n  width: 400px;\r\n  text-align: left;\r\n  text-indent: 10px;\r\n  color: black;\r\n}\r\n\r\n.top1_text2 {\r\n  display: block;\r\n  width: 400px;\r\n  text-align: left;\r\n  text-indent: 10px;\r\n  font-size: 16px;\r\n  color: black;\r\n}\r\n\r\n.top1_text3 {\r\n  display: block;\r\n  width: 400px;\r\n  text-align: left;\r\n  text-indent: 10px;\r\n  color: orange;\r\n  font-size: 14px;\r\n}\r\n\r\n.top2 {\r\n  width: 145px;\r\n  height: 230px;\r\n  margin-top: 20px;\r\n  display: inline-block;\r\n  border: 1px solid rgb(228, 228, 228);\r\n  overflow: hidden;\r\n}\r\n\r\n.top2_text1 {\r\n  color: black;\r\n  text-align: left;\r\n  text-indent: 10px;\r\n  width: 140px;\r\n  height: 22px;\r\n  font-size: 18px;\r\n  display: inline-block;\r\n  overflow: hidden;\r\n}\r\n\r\n.top2_text2 {\r\n  display: block;\r\n  margin-top: 5px;\r\n  width: 400px;\r\n  text-align: left;\r\n  text-indent: 10px;\r\n  color: orange;\r\n  font-size: 14px;\r\n}\r\n\r\n.top_more {\r\n  margin-top: 30px;\r\n  width: 303px;\r\n  margin-left: 24px;\r\n}\r\n\r\n.top_more_span1 {\r\n  float: left;\r\n  color: black;\r\n  font-size: 18px;\r\n}\r\n\r\n.top_more_span2 {\r\n  width: 5px;\r\n  color: gray;\r\n  display: inline-block;\r\n  text-align: left;\r\n  margin-right: 30px;\r\n}\r\n\r\n.top_more_span3 {\r\n  float: right;\r\n  color: orange;\r\n  font-size: 15px;\r\n  display: inline-block;\r\n}\r\n\r\n/* 电影区CSS */\r\n.sidetitle {\r\n  color: orange;\r\n  float: left;\r\n  width: 800px;\r\n  text-align: left;\r\n  text-indent: 40px;\r\n}\r\n\r\n.movie_info {\r\n  position: relative;\r\n  top: -41px;\r\n}\r\n\r\n.movie_info_wanttosee {\r\n  text-indent: 10px;\r\n  padding: 5px 0;\r\n  text-align: left;\r\n  width: 170px;\r\n  color: orange;\r\n  font-size: 14px;\r\n  margin-left: 9px;\r\n  margin-top: 3px;\r\n  position: relative;\r\n  background-color: rgb(235, 228, 220);\r\n  top:-20px\r\n}\r\n\r\n.movie_info_on {\r\n  margin-top: 14px;\r\n  text-align: center;\r\n  width: 170px;\r\n  color: gray;\r\n  font-size: 14px;\r\n  margin-left: 9px;\r\n  position: relative;\r\n}\r\n\r\n.image {\r\n  width: 100%;\r\n  display: block;\r\n}\r\n\r\n.showTagName {\r\n  overflow: hidden;\r\n  display: none;\r\n  width: 170px;\r\n  height: 25px;\r\n  position: relative;\r\n  top: -39px;\r\n  color: white;\r\n  background-color: rgba(1, 1, 1, 0.3);\r\n}\r\n\r\n.el-col:hover div span {\r\n  display: inline-block;\r\n}\r\n\r\n/* 轮播CSS */\r\n.post {\r\n  position: relative;\r\n  margin: 0 auto;\r\n  width: 1500px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 主页面CSS */\r\n.home {\r\n  background-color: rgb(255, 255, 255);\r\n  text-align: center;\r\n}\r\n\r\n.el-aside {\r\n  /* background-color:darkslategray; */\r\n  color: honeydew;\r\n  margin-left: 100px;\r\n  min-width: 400px;\r\n  overflow: hidden;\r\n}\r\n\r\n.el-main {\r\n  /* background-color: blueviolet; */\r\n  color: honeydew;\r\n\r\n  margin-left: 175px;\r\n  max-width: 1000px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}