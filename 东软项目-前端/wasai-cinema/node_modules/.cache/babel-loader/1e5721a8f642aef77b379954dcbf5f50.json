{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar validate_1 = require(\"../../compile/validate\");\n\nvar code_1 = require(\"../code\");\n\nvar util_1 = require(\"../../compile/util\");\n\nvar additionalProperties_1 = require(\"./additionalProperties\");\n\nvar def = {\n  keyword: \"properties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code: function code(cxt) {\n    var gen = cxt.gen,\n        schema = cxt.schema,\n        parentSchema = cxt.parentSchema,\n        data = cxt.data,\n        it = cxt.it;\n\n    if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n      additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n    }\n\n    var allProps = (0, code_1.allSchemaProperties)(schema);\n\n    var _iterator = _createForOfIteratorHelper(allProps),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        it.definedProperties.add(prop);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    if (it.opts.unevaluated && allProps.length && it.props !== true) {\n      it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n    }\n\n    var properties = allProps.filter(function (p) {\n      return !(0, util_1.alwaysValidSchema)(it, schema[p]);\n    });\n    if (properties.length === 0) return;\n    var valid = gen.name(\"valid\");\n\n    var _iterator2 = _createForOfIteratorHelper(properties),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _prop = _step2.value;\n\n        if (hasDefault(_prop)) {\n          applyPropertySchema(_prop);\n        } else {\n          gen.if((0, code_1.propertyInData)(gen, data, _prop, it.opts.ownProperties));\n          applyPropertySchema(_prop);\n          if (!it.allErrors) gen.else().var(valid, true);\n          gen.endIf();\n        }\n\n        cxt.it.definedProperties.add(_prop);\n        cxt.ok(valid);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    function hasDefault(prop) {\n      return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n    }\n\n    function applyPropertySchema(prop) {\n      cxt.subschema({\n        keyword: \"properties\",\n        schemaProp: prop,\n        dataProp: prop\n      }, valid);\n    }\n  }\n};\nexports.default = def;","map":{"version":3,"mappings":";;;;;;;;;;;;;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,GAAG,GAA0B;AACjCC,SAAO,EAAE,YADwB;AAEjCC,MAAI,EAAE,QAF2B;AAGjCC,YAAU,EAAE,QAHqB;AAIjCC,MAJiC,gBAI5BC,GAJ4B,EAIb;AAClB,QAAOC,GAAP,GAA8CD,GAA9C,CAAOC,GAAP;AAAA,QAAYC,MAAZ,GAA8CF,GAA9C,CAAYE,MAAZ;AAAA,QAAoBC,YAApB,GAA8CH,GAA9C,CAAoBG,YAApB;AAAA,QAAkCC,IAAlC,GAA8CJ,GAA9C,CAAkCI,IAAlC;AAAA,QAAwCC,EAAxC,GAA8CL,GAA9C,CAAwCK,EAAxC;;AACA,QAAIA,EAAE,CAACC,IAAH,CAAQC,gBAAR,KAA6B,KAA7B,IAAsCJ,YAAY,CAACK,oBAAb,KAAsCC,SAAhF,EAA2F;AACzFC,qCAAMX,IAAN,CAAW,IAAIY,qBAAJ,CAAeN,EAAf,EAAmBK,8BAAnB,EAA0B,sBAA1B,CAAX;AACD;;AACD,QAAME,QAAQ,GAAG,gCAAoBV,MAApB,CAAjB;;AALkB,+CAMCU,QAND;AAAA;;AAAA;AAMlB,0DAA6B;AAAA,YAAlBC,IAAkB;AAC3BR,UAAE,CAACS,iBAAH,CAAqBC,GAArB,CAAyBF,IAAzB;AACD;AARiB;AAAA;AAAA;AAAA;AAAA;;AASlB,QAAIR,EAAE,CAACC,IAAH,CAAQU,WAAR,IAAuBJ,QAAQ,CAACK,MAAhC,IAA0CZ,EAAE,CAACa,KAAH,KAAa,IAA3D,EAAiE;AAC/Db,QAAE,CAACa,KAAH,GAAWC,sBAAeD,KAAf,CAAqBjB,GAArB,EAA0B,mBAAOW,QAAP,CAA1B,EAA4CP,EAAE,CAACa,KAA/C,CAAX;AACD;;AACD,QAAME,UAAU,GAAGR,QAAQ,CAACS,MAAT,CAAgB,UAACC,CAAD;AAAA,aAAO,CAAC,8BAAkBjB,EAAlB,EAAsBH,MAAM,CAACoB,CAAD,CAA5B,CAAR;AAAA,KAAhB,CAAnB;AACA,QAAIF,UAAU,CAACH,MAAX,KAAsB,CAA1B,EAA6B;AAC7B,QAAMM,KAAK,GAAGtB,GAAG,CAACuB,IAAJ,CAAS,OAAT,CAAd;;AAdkB,gDAgBCJ,UAhBD;AAAA;;AAAA;AAgBlB,6DAA+B;AAAA,YAApBP,KAAoB;;AAC7B,YAAIY,UAAU,CAACZ,KAAD,CAAd,EAAsB;AACpBa,6BAAmB,CAACb,KAAD,CAAnB;AACD,SAFD,MAEO;AACLZ,aAAG,CAAC0B,EAAJ,CAAO,2BAAe1B,GAAf,EAAoBG,IAApB,EAA0BS,KAA1B,EAAgCR,EAAE,CAACC,IAAH,CAAQsB,aAAxC,CAAP;AACAF,6BAAmB,CAACb,KAAD,CAAnB;AACA,cAAI,CAACR,EAAE,CAACwB,SAAR,EAAmB5B,GAAG,CAAC6B,IAAJ,GAAWC,GAAX,CAAeR,KAAf,EAAsB,IAAtB;AACnBtB,aAAG,CAAC+B,KAAJ;AACD;;AACDhC,WAAG,CAACK,EAAJ,CAAOS,iBAAP,CAAyBC,GAAzB,CAA6BF,KAA7B;AACAb,WAAG,CAACiC,EAAJ,CAAOV,KAAP;AACD;AA3BiB;AAAA;AAAA;AAAA;AAAA;;AA6BlB,aAASE,UAAT,CAAoBZ,IAApB,EAAgC;AAC9B,aAAOR,EAAE,CAACC,IAAH,CAAQ4B,WAAR,IAAuB,CAAC7B,EAAE,CAAC8B,aAA3B,IAA4CjC,MAAM,CAACW,IAAD,CAAN,CAAauB,OAAb,KAAyB3B,SAA5E;AACD;;AAED,aAASiB,mBAAT,CAA6Bb,IAA7B,EAAyC;AACvCb,SAAG,CAACqC,SAAJ,CACE;AACEzC,eAAO,EAAE,YADX;AAEE0C,kBAAU,EAAEzB,IAFd;AAGE0B,gBAAQ,EAAE1B;AAHZ,OADF,EAMEU,KANF;AAQD;AACF;AA/CgC,CAAnC;AAkDAiB,kBAAe7C,GAAf","names":["def","keyword","type","schemaType","code","cxt","gen","schema","parentSchema","data","it","opts","removeAdditional","additionalProperties","undefined","additionalProperties_1","validate_1","allProps","prop","definedProperties","add","unevaluated","length","props","util_1","properties","filter","p","valid","name","hasDefault","applyPropertySchema","if","ownProperties","allErrors","else","var","endIf","ok","useDefaults","compositeRule","default","subschema","schemaProp","dataProp","exports"],"sourceRoot":"","sources":["../../../lib/vocabularies/applicator/properties.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}