{"ast":null,"code":"\"use strict\";\n\nvar _taggedTemplateLiteral = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js\").default;\n\nvar _slicedToArray = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nvar _get = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/get.js\").default;\n\nvar _getPrototypeOf = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\n\nvar _toConsumableArray = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\n\nvar _objectSpread = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\n\nvar _inherits = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar _classCallCheck = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6;\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.splice.js\");\n\nrequire(\"core-js/modules/es.set.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.error.cause.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\n\nvar code_1 = require(\"./code\");\n\nvar scope_1 = require(\"./scope\");\n\nvar code_2 = require(\"./code\");\n\nObject.defineProperty(exports, \"_\", {\n  enumerable: true,\n  get: function get() {\n    return code_2._;\n  }\n});\nObject.defineProperty(exports, \"str\", {\n  enumerable: true,\n  get: function get() {\n    return code_2.str;\n  }\n});\nObject.defineProperty(exports, \"strConcat\", {\n  enumerable: true,\n  get: function get() {\n    return code_2.strConcat;\n  }\n});\nObject.defineProperty(exports, \"nil\", {\n  enumerable: true,\n  get: function get() {\n    return code_2.nil;\n  }\n});\nObject.defineProperty(exports, \"getProperty\", {\n  enumerable: true,\n  get: function get() {\n    return code_2.getProperty;\n  }\n});\nObject.defineProperty(exports, \"stringify\", {\n  enumerable: true,\n  get: function get() {\n    return code_2.stringify;\n  }\n});\nObject.defineProperty(exports, \"regexpCode\", {\n  enumerable: true,\n  get: function get() {\n    return code_2.regexpCode;\n  }\n});\nObject.defineProperty(exports, \"Name\", {\n  enumerable: true,\n  get: function get() {\n    return code_2.Name;\n  }\n});\n\nvar scope_2 = require(\"./scope\");\n\nObject.defineProperty(exports, \"Scope\", {\n  enumerable: true,\n  get: function get() {\n    return scope_2.Scope;\n  }\n});\nObject.defineProperty(exports, \"ValueScope\", {\n  enumerable: true,\n  get: function get() {\n    return scope_2.ValueScope;\n  }\n});\nObject.defineProperty(exports, \"ValueScopeName\", {\n  enumerable: true,\n  get: function get() {\n    return scope_2.ValueScopeName;\n  }\n});\nObject.defineProperty(exports, \"varKinds\", {\n  enumerable: true,\n  get: function get() {\n    return scope_2.varKinds;\n  }\n});\nexports.operators = {\n  GT: new code_1._Code(\">\"),\n  GTE: new code_1._Code(\">=\"),\n  LT: new code_1._Code(\"<\"),\n  LTE: new code_1._Code(\"<=\"),\n  EQ: new code_1._Code(\"===\"),\n  NEQ: new code_1._Code(\"!==\"),\n  NOT: new code_1._Code(\"!\"),\n  OR: new code_1._Code(\"||\"),\n  AND: new code_1._Code(\"&&\"),\n  ADD: new code_1._Code(\"+\")\n};\n\nvar Node = /*#__PURE__*/function () {\n  function Node() {\n    _classCallCheck(this, Node);\n  }\n\n  _createClass(Node, [{\n    key: \"optimizeNodes\",\n    value: function optimizeNodes() {\n      return this;\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(_names, _constants) {\n      return this;\n    }\n  }]);\n\n  return Node;\n}();\n\nvar Def = /*#__PURE__*/function (_Node) {\n  _inherits(Def, _Node);\n\n  var _super = _createSuper(Def);\n\n  function Def(varKind, name, rhs) {\n    var _this;\n\n    _classCallCheck(this, Def);\n\n    _this = _super.call(this);\n    _this.varKind = varKind;\n    _this.name = name;\n    _this.rhs = rhs;\n    return _this;\n  }\n\n  _createClass(Def, [{\n    key: \"render\",\n    value: function render(_ref) {\n      var es5 = _ref.es5,\n          _n = _ref._n;\n      var varKind = es5 ? scope_1.varKinds.var : this.varKind;\n      var rhs = this.rhs === undefined ? \"\" : \" = \".concat(this.rhs);\n      return \"\".concat(varKind, \" \").concat(this.name).concat(rhs, \";\") + _n;\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      if (!names[this.name.str]) return;\n      if (this.rhs) this.rhs = optimizeExpr(this.rhs, names, constants);\n      return this;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n  }]);\n\n  return Def;\n}(Node);\n\nvar Assign = /*#__PURE__*/function (_Node2) {\n  _inherits(Assign, _Node2);\n\n  var _super2 = _createSuper(Assign);\n\n  function Assign(lhs, rhs, sideEffects) {\n    var _this2;\n\n    _classCallCheck(this, Assign);\n\n    _this2 = _super2.call(this);\n    _this2.lhs = lhs;\n    _this2.rhs = rhs;\n    _this2.sideEffects = sideEffects;\n    return _this2;\n  }\n\n  _createClass(Assign, [{\n    key: \"render\",\n    value: function render(_ref2) {\n      var _n = _ref2._n;\n      return \"\".concat(this.lhs, \" = \").concat(this.rhs, \";\") + _n;\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects) return;\n      this.rhs = optimizeExpr(this.rhs, names, constants);\n      return this;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      var names = this.lhs instanceof code_1.Name ? {} : _objectSpread({}, this.lhs.names);\n      return addExprNames(names, this.rhs);\n    }\n  }]);\n\n  return Assign;\n}(Node);\n\nvar AssignOp = /*#__PURE__*/function (_Assign) {\n  _inherits(AssignOp, _Assign);\n\n  var _super3 = _createSuper(AssignOp);\n\n  function AssignOp(lhs, op, rhs, sideEffects) {\n    var _this3;\n\n    _classCallCheck(this, AssignOp);\n\n    _this3 = _super3.call(this, lhs, rhs, sideEffects);\n    _this3.op = op;\n    return _this3;\n  }\n\n  _createClass(AssignOp, [{\n    key: \"render\",\n    value: function render(_ref3) {\n      var _n = _ref3._n;\n      return \"\".concat(this.lhs, \" \").concat(this.op, \"= \").concat(this.rhs, \";\") + _n;\n    }\n  }]);\n\n  return AssignOp;\n}(Assign);\n\nvar Label = /*#__PURE__*/function (_Node3) {\n  _inherits(Label, _Node3);\n\n  var _super4 = _createSuper(Label);\n\n  function Label(label) {\n    var _this4;\n\n    _classCallCheck(this, Label);\n\n    _this4 = _super4.call(this);\n    _this4.label = label;\n    _this4.names = {};\n    return _this4;\n  }\n\n  _createClass(Label, [{\n    key: \"render\",\n    value: function render(_ref4) {\n      var _n = _ref4._n;\n      return \"\".concat(this.label, \":\") + _n;\n    }\n  }]);\n\n  return Label;\n}(Node);\n\nvar Break = /*#__PURE__*/function (_Node4) {\n  _inherits(Break, _Node4);\n\n  var _super5 = _createSuper(Break);\n\n  function Break(label) {\n    var _this5;\n\n    _classCallCheck(this, Break);\n\n    _this5 = _super5.call(this);\n    _this5.label = label;\n    _this5.names = {};\n    return _this5;\n  }\n\n  _createClass(Break, [{\n    key: \"render\",\n    value: function render(_ref5) {\n      var _n = _ref5._n;\n      var label = this.label ? \" \".concat(this.label) : \"\";\n      return \"break\".concat(label, \";\") + _n;\n    }\n  }]);\n\n  return Break;\n}(Node);\n\nvar Throw = /*#__PURE__*/function (_Node5) {\n  _inherits(Throw, _Node5);\n\n  var _super6 = _createSuper(Throw);\n\n  function Throw(error) {\n    var _this6;\n\n    _classCallCheck(this, Throw);\n\n    _this6 = _super6.call(this);\n    _this6.error = error;\n    return _this6;\n  }\n\n  _createClass(Throw, [{\n    key: \"render\",\n    value: function render(_ref6) {\n      var _n = _ref6._n;\n      return \"throw \".concat(this.error, \";\") + _n;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      return this.error.names;\n    }\n  }]);\n\n  return Throw;\n}(Node);\n\nvar AnyCode = /*#__PURE__*/function (_Node6) {\n  _inherits(AnyCode, _Node6);\n\n  var _super7 = _createSuper(AnyCode);\n\n  function AnyCode(code) {\n    var _this7;\n\n    _classCallCheck(this, AnyCode);\n\n    _this7 = _super7.call(this);\n    _this7.code = code;\n    return _this7;\n  }\n\n  _createClass(AnyCode, [{\n    key: \"render\",\n    value: function render(_ref7) {\n      var _n = _ref7._n;\n      return \"\".concat(this.code, \";\") + _n;\n    }\n  }, {\n    key: \"optimizeNodes\",\n    value: function optimizeNodes() {\n      return \"\".concat(this.code) ? this : undefined;\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      this.code = optimizeExpr(this.code, names, constants);\n      return this;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n  }]);\n\n  return AnyCode;\n}(Node);\n\nvar ParentNode = /*#__PURE__*/function (_Node7) {\n  _inherits(ParentNode, _Node7);\n\n  var _super8 = _createSuper(ParentNode);\n\n  function ParentNode() {\n    var _this8;\n\n    var nodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, ParentNode);\n\n    _this8 = _super8.call(this);\n    _this8.nodes = nodes;\n    return _this8;\n  }\n\n  _createClass(ParentNode, [{\n    key: \"render\",\n    value: function render(opts) {\n      return this.nodes.reduce(function (code, n) {\n        return code + n.render(opts);\n      }, \"\");\n    }\n  }, {\n    key: \"optimizeNodes\",\n    value: function optimizeNodes() {\n      var nodes = this.nodes;\n      var i = nodes.length;\n\n      while (i--) {\n        var n = nodes[i].optimizeNodes();\n        if (Array.isArray(n)) nodes.splice.apply(nodes, [i, 1].concat(_toConsumableArray(n)));else if (n) nodes[i] = n;else nodes.splice(i, 1);\n      }\n\n      return nodes.length > 0 ? this : undefined;\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      var nodes = this.nodes;\n      var i = nodes.length;\n\n      while (i--) {\n        // iterating backwards improves 1-pass optimization\n        var n = nodes[i];\n        if (n.optimizeNames(names, constants)) continue;\n        subtractNames(names, n.names);\n        nodes.splice(i, 1);\n      }\n\n      return nodes.length > 0 ? this : undefined;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      return this.nodes.reduce(function (names, n) {\n        return addNames(names, n.names);\n      }, {});\n    }\n  }]);\n\n  return ParentNode;\n}(Node);\n\nvar BlockNode = /*#__PURE__*/function (_ParentNode) {\n  _inherits(BlockNode, _ParentNode);\n\n  var _super9 = _createSuper(BlockNode);\n\n  function BlockNode() {\n    _classCallCheck(this, BlockNode);\n\n    return _super9.apply(this, arguments);\n  }\n\n  _createClass(BlockNode, [{\n    key: \"render\",\n    value: function render(opts) {\n      return \"{\" + opts._n + _get(_getPrototypeOf(BlockNode.prototype), \"render\", this).call(this, opts) + \"}\" + opts._n;\n    }\n  }]);\n\n  return BlockNode;\n}(ParentNode);\n\nvar Root = /*#__PURE__*/function (_ParentNode2) {\n  _inherits(Root, _ParentNode2);\n\n  var _super10 = _createSuper(Root);\n\n  function Root() {\n    _classCallCheck(this, Root);\n\n    return _super10.apply(this, arguments);\n  }\n\n  return _createClass(Root);\n}(ParentNode);\n\nvar Else = /*#__PURE__*/function (_BlockNode) {\n  _inherits(Else, _BlockNode);\n\n  var _super11 = _createSuper(Else);\n\n  function Else() {\n    _classCallCheck(this, Else);\n\n    return _super11.apply(this, arguments);\n  }\n\n  return _createClass(Else);\n}(BlockNode);\n\nElse.kind = \"else\";\n\nvar If = /*#__PURE__*/function (_BlockNode2) {\n  _inherits(If, _BlockNode2);\n\n  var _super12 = _createSuper(If);\n\n  function If(condition, nodes) {\n    var _this9;\n\n    _classCallCheck(this, If);\n\n    _this9 = _super12.call(this, nodes);\n    _this9.condition = condition;\n    return _this9;\n  }\n\n  _createClass(If, [{\n    key: \"render\",\n    value: function render(opts) {\n      var code = \"if(\".concat(this.condition, \")\") + _get(_getPrototypeOf(If.prototype), \"render\", this).call(this, opts);\n\n      if (this.else) code += \"else \" + this.else.render(opts);\n      return code;\n    }\n  }, {\n    key: \"optimizeNodes\",\n    value: function optimizeNodes() {\n      _get(_getPrototypeOf(If.prototype), \"optimizeNodes\", this).call(this);\n\n      var cond = this.condition;\n      if (cond === true) return this.nodes; // else is ignored here\n\n      var e = this.else;\n\n      if (e) {\n        var ns = e.optimizeNodes();\n        e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n      }\n\n      if (e) {\n        if (cond === false) return e instanceof If ? e : e.nodes;\n        if (this.nodes.length) return this;\n        return new If(not(cond), e instanceof If ? [e] : e.nodes);\n      }\n\n      if (cond === false || !this.nodes.length) return undefined;\n      return this;\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      var _a;\n\n      this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n      if (!(_get(_getPrototypeOf(If.prototype), \"optimizeNames\", this).call(this, names, constants) || this.else)) return;\n      this.condition = optimizeExpr(this.condition, names, constants);\n      return this;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      var names = _get(_getPrototypeOf(If.prototype), \"names\", this);\n\n      addExprNames(names, this.condition);\n      if (this.else) addNames(names, this.else.names);\n      return names;\n    }\n  }]);\n\n  return If;\n}(BlockNode);\n\nIf.kind = \"if\";\n\nvar For = /*#__PURE__*/function (_BlockNode3) {\n  _inherits(For, _BlockNode3);\n\n  var _super13 = _createSuper(For);\n\n  function For() {\n    _classCallCheck(this, For);\n\n    return _super13.apply(this, arguments);\n  }\n\n  return _createClass(For);\n}(BlockNode);\n\nFor.kind = \"for\";\n\nvar ForLoop = /*#__PURE__*/function (_For) {\n  _inherits(ForLoop, _For);\n\n  var _super14 = _createSuper(ForLoop);\n\n  function ForLoop(iteration) {\n    var _this10;\n\n    _classCallCheck(this, ForLoop);\n\n    _this10 = _super14.call(this);\n    _this10.iteration = iteration;\n    return _this10;\n  }\n\n  _createClass(ForLoop, [{\n    key: \"render\",\n    value: function render(opts) {\n      return \"for(\".concat(this.iteration, \")\") + _get(_getPrototypeOf(ForLoop.prototype), \"render\", this).call(this, opts);\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      if (!_get(_getPrototypeOf(ForLoop.prototype), \"optimizeNames\", this).call(this, names, constants)) return;\n      this.iteration = optimizeExpr(this.iteration, names, constants);\n      return this;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      return addNames(_get(_getPrototypeOf(ForLoop.prototype), \"names\", this), this.iteration.names);\n    }\n  }]);\n\n  return ForLoop;\n}(For);\n\nvar ForRange = /*#__PURE__*/function (_For2) {\n  _inherits(ForRange, _For2);\n\n  var _super15 = _createSuper(ForRange);\n\n  function ForRange(varKind, name, from, to) {\n    var _this11;\n\n    _classCallCheck(this, ForRange);\n\n    _this11 = _super15.call(this);\n    _this11.varKind = varKind;\n    _this11.name = name;\n    _this11.from = from;\n    _this11.to = to;\n    return _this11;\n  }\n\n  _createClass(ForRange, [{\n    key: \"render\",\n    value: function render(opts) {\n      var varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n      var name = this.name,\n          from = this.from,\n          to = this.to;\n      return \"for(\".concat(varKind, \" \").concat(name, \"=\").concat(from, \"; \").concat(name, \"<\").concat(to, \"; \").concat(name, \"++)\") + _get(_getPrototypeOf(ForRange.prototype), \"render\", this).call(this, opts);\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      var names = addExprNames(_get(_getPrototypeOf(ForRange.prototype), \"names\", this), this.from);\n      return addExprNames(names, this.to);\n    }\n  }]);\n\n  return ForRange;\n}(For);\n\nvar ForIter = /*#__PURE__*/function (_For3) {\n  _inherits(ForIter, _For3);\n\n  var _super16 = _createSuper(ForIter);\n\n  function ForIter(loop, varKind, name, iterable) {\n    var _this12;\n\n    _classCallCheck(this, ForIter);\n\n    _this12 = _super16.call(this);\n    _this12.loop = loop;\n    _this12.varKind = varKind;\n    _this12.name = name;\n    _this12.iterable = iterable;\n    return _this12;\n  }\n\n  _createClass(ForIter, [{\n    key: \"render\",\n    value: function render(opts) {\n      return \"for(\".concat(this.varKind, \" \").concat(this.name, \" \").concat(this.loop, \" \").concat(this.iterable, \")\") + _get(_getPrototypeOf(ForIter.prototype), \"render\", this).call(this, opts);\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      if (!_get(_getPrototypeOf(ForIter.prototype), \"optimizeNames\", this).call(this, names, constants)) return;\n      this.iterable = optimizeExpr(this.iterable, names, constants);\n      return this;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      return addNames(_get(_getPrototypeOf(ForIter.prototype), \"names\", this), this.iterable.names);\n    }\n  }]);\n\n  return ForIter;\n}(For);\n\nvar Func = /*#__PURE__*/function (_BlockNode4) {\n  _inherits(Func, _BlockNode4);\n\n  var _super17 = _createSuper(Func);\n\n  function Func(name, args, async) {\n    var _this13;\n\n    _classCallCheck(this, Func);\n\n    _this13 = _super17.call(this);\n    _this13.name = name;\n    _this13.args = args;\n    _this13.async = async;\n    return _this13;\n  }\n\n  _createClass(Func, [{\n    key: \"render\",\n    value: function render(opts) {\n      var _async = this.async ? \"async \" : \"\";\n\n      return \"\".concat(_async, \"function \").concat(this.name, \"(\").concat(this.args, \")\") + _get(_getPrototypeOf(Func.prototype), \"render\", this).call(this, opts);\n    }\n  }]);\n\n  return Func;\n}(BlockNode);\n\nFunc.kind = \"func\";\n\nvar Return = /*#__PURE__*/function (_ParentNode3) {\n  _inherits(Return, _ParentNode3);\n\n  var _super18 = _createSuper(Return);\n\n  function Return() {\n    _classCallCheck(this, Return);\n\n    return _super18.apply(this, arguments);\n  }\n\n  _createClass(Return, [{\n    key: \"render\",\n    value: function render(opts) {\n      return \"return \" + _get(_getPrototypeOf(Return.prototype), \"render\", this).call(this, opts);\n    }\n  }]);\n\n  return Return;\n}(ParentNode);\n\nReturn.kind = \"return\";\n\nvar Try = /*#__PURE__*/function (_BlockNode5) {\n  _inherits(Try, _BlockNode5);\n\n  var _super19 = _createSuper(Try);\n\n  function Try() {\n    _classCallCheck(this, Try);\n\n    return _super19.apply(this, arguments);\n  }\n\n  _createClass(Try, [{\n    key: \"render\",\n    value: function render(opts) {\n      var code = \"try\" + _get(_getPrototypeOf(Try.prototype), \"render\", this).call(this, opts);\n\n      if (this.catch) code += this.catch.render(opts);\n      if (this.finally) code += this.finally.render(opts);\n      return code;\n    }\n  }, {\n    key: \"optimizeNodes\",\n    value: function optimizeNodes() {\n      var _a, _b;\n\n      _get(_getPrototypeOf(Try.prototype), \"optimizeNodes\", this).call(this);\n\n      (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n      (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n      return this;\n    }\n  }, {\n    key: \"optimizeNames\",\n    value: function optimizeNames(names, constants) {\n      var _a, _b;\n\n      _get(_getPrototypeOf(Try.prototype), \"optimizeNames\", this).call(this, names, constants);\n\n      (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n      (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n      return this;\n    }\n  }, {\n    key: \"names\",\n    get: function get() {\n      var names = _get(_getPrototypeOf(Try.prototype), \"names\", this);\n\n      if (this.catch) addNames(names, this.catch.names);\n      if (this.finally) addNames(names, this.finally.names);\n      return names;\n    }\n  }]);\n\n  return Try;\n}(BlockNode);\n\nvar Catch = /*#__PURE__*/function (_BlockNode6) {\n  _inherits(Catch, _BlockNode6);\n\n  var _super20 = _createSuper(Catch);\n\n  function Catch(error) {\n    var _this14;\n\n    _classCallCheck(this, Catch);\n\n    _this14 = _super20.call(this);\n    _this14.error = error;\n    return _this14;\n  }\n\n  _createClass(Catch, [{\n    key: \"render\",\n    value: function render(opts) {\n      return \"catch(\".concat(this.error, \")\") + _get(_getPrototypeOf(Catch.prototype), \"render\", this).call(this, opts);\n    }\n  }]);\n\n  return Catch;\n}(BlockNode);\n\nCatch.kind = \"catch\";\n\nvar Finally = /*#__PURE__*/function (_BlockNode7) {\n  _inherits(Finally, _BlockNode7);\n\n  var _super21 = _createSuper(Finally);\n\n  function Finally() {\n    _classCallCheck(this, Finally);\n\n    return _super21.apply(this, arguments);\n  }\n\n  _createClass(Finally, [{\n    key: \"render\",\n    value: function render(opts) {\n      return \"finally\" + _get(_getPrototypeOf(Finally.prototype), \"render\", this).call(this, opts);\n    }\n  }]);\n\n  return Finally;\n}(BlockNode);\n\nFinally.kind = \"finally\";\n\nvar CodeGen = /*#__PURE__*/function () {\n  function CodeGen(extScope) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, CodeGen);\n\n    this._values = {};\n    this._blockStarts = [];\n    this._constants = {};\n    this.opts = _objectSpread(_objectSpread({}, opts), {}, {\n      _n: opts.lines ? \"\\n\" : \"\"\n    });\n    this._extScope = extScope;\n    this._scope = new scope_1.Scope({\n      parent: extScope\n    });\n    this._nodes = [new Root()];\n  }\n\n  _createClass(CodeGen, [{\n    key: \"toString\",\n    value: function toString() {\n      return this._root.render(this.opts);\n    } // returns unique name in the internal scope\n\n  }, {\n    key: \"name\",\n    value: function name(prefix) {\n      return this._scope.name(prefix);\n    } // reserves unique name in the external scope\n\n  }, {\n    key: \"scopeName\",\n    value: function scopeName(prefix) {\n      return this._extScope.name(prefix);\n    } // reserves unique name in the external scope and assigns value to it\n\n  }, {\n    key: \"scopeValue\",\n    value: function scopeValue(prefixOrName, value) {\n      var name = this._extScope.value(prefixOrName, value);\n\n      var vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n      vs.add(name);\n      return name;\n    }\n  }, {\n    key: \"getScopeValue\",\n    value: function getScopeValue(prefix, keyOrRef) {\n      return this._extScope.getValue(prefix, keyOrRef);\n    } // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n\n  }, {\n    key: \"scopeRefs\",\n    value: function scopeRefs(scopeName) {\n      return this._extScope.scopeRefs(scopeName, this._values);\n    }\n  }, {\n    key: \"scopeCode\",\n    value: function scopeCode() {\n      return this._extScope.scopeCode(this._values);\n    }\n  }, {\n    key: \"_def\",\n    value: function _def(varKind, nameOrPrefix, rhs, constant) {\n      var name = this._scope.toName(nameOrPrefix);\n\n      if (rhs !== undefined && constant) this._constants[name.str] = rhs;\n\n      this._leafNode(new Def(varKind, name, rhs));\n\n      return name;\n    } // `const` declaration (`var` in es5 mode)\n\n  }, {\n    key: \"const\",\n    value: function _const(nameOrPrefix, rhs, _constant) {\n      return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    } // `let` declaration with optional assignment (`var` in es5 mode)\n\n  }, {\n    key: \"let\",\n    value: function _let(nameOrPrefix, rhs, _constant) {\n      return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    } // `var` declaration with optional assignment\n\n  }, {\n    key: \"var\",\n    value: function _var(nameOrPrefix, rhs, _constant) {\n      return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    } // assignment code\n\n  }, {\n    key: \"assign\",\n    value: function assign(lhs, rhs, sideEffects) {\n      return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    } // `+=` code\n\n  }, {\n    key: \"add\",\n    value: function add(lhs, rhs) {\n      return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    } // appends passed SafeExpr to code or executes Block\n\n  }, {\n    key: \"code\",\n    value: function code(c) {\n      if (typeof c == \"function\") c();else if (c !== code_1.nil) this._leafNode(new AnyCode(c));\n      return this;\n    } // returns code for object literal for the passed argument list of key-value pairs\n\n  }, {\n    key: \"object\",\n    value: function object() {\n      var code = [\"{\"];\n\n      for (var _len = arguments.length, keyValues = new Array(_len), _key = 0; _key < _len; _key++) {\n        keyValues[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _keyValues = keyValues; _i < _keyValues.length; _i++) {\n        var _keyValues$_i = _slicedToArray(_keyValues[_i], 2),\n            key = _keyValues$_i[0],\n            value = _keyValues$_i[1];\n\n        if (code.length > 1) code.push(\",\");\n        code.push(key);\n\n        if (key !== value || this.opts.es5) {\n          code.push(\":\");\n          (0, code_1.addCodeArg)(code, value);\n        }\n      }\n\n      code.push(\"}\");\n      return new code_1._Code(code);\n    } // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n\n  }, {\n    key: \"if\",\n    value: function _if(condition, thenBody, elseBody) {\n      this._blockNode(new If(condition));\n\n      if (thenBody && elseBody) {\n        this.code(thenBody).else().code(elseBody).endIf();\n      } else if (thenBody) {\n        this.code(thenBody).endIf();\n      } else if (elseBody) {\n        throw new Error('CodeGen: \"else\" body without \"then\" body');\n      }\n\n      return this;\n    } // `else if` clause - invalid without `if` or after `else` clauses\n\n  }, {\n    key: \"elseIf\",\n    value: function elseIf(condition) {\n      return this._elseNode(new If(condition));\n    } // `else` clause - only valid after `if` or `else if` clauses\n\n  }, {\n    key: \"else\",\n    value: function _else() {\n      return this._elseNode(new Else());\n    } // end `if` statement (needed if gen.if was used only with condition)\n\n  }, {\n    key: \"endIf\",\n    value: function endIf() {\n      return this._endBlockNode(If, Else);\n    }\n  }, {\n    key: \"_for\",\n    value: function _for(node, forBody) {\n      this._blockNode(node);\n\n      if (forBody) this.code(forBody).endFor();\n      return this;\n    } // a generic `for` clause (or statement if `forBody` is passed)\n\n  }, {\n    key: \"for\",\n    value: function _for(iteration, forBody) {\n      return this._for(new ForLoop(iteration), forBody);\n    } // `for` statement for a range of values\n\n  }, {\n    key: \"forRange\",\n    value: function forRange(nameOrPrefix, from, to, forBody) {\n      var varKind = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let;\n\n      var name = this._scope.toName(nameOrPrefix);\n\n      return this._for(new ForRange(varKind, name, from, to), function () {\n        return forBody(name);\n      });\n    } // `for-of` statement (in es5 mode replace with a normal for loop)\n\n  }, {\n    key: \"forOf\",\n    value: function forOf(nameOrPrefix, iterable, forBody) {\n      var _this15 = this;\n\n      var varKind = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : scope_1.varKinds.const;\n\n      var name = this._scope.toName(nameOrPrefix);\n\n      if (this.opts.es5) {\n        var arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n        return this.forRange(\"_i\", 0, (0, code_1._)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\", \".length\"])), arr), function (i) {\n          _this15.var(name, (0, code_1._)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\", \"[\", \"]\"])), arr, i));\n\n          forBody(name);\n        });\n      }\n\n      return this._for(new ForIter(\"of\", varKind, name, iterable), function () {\n        return forBody(name);\n      });\n    } // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n\n  }, {\n    key: \"forIn\",\n    value: function forIn(nameOrPrefix, obj, forBody) {\n      var varKind = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const;\n\n      if (this.opts.ownProperties) {\n        return this.forOf(nameOrPrefix, (0, code_1._)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"Object.keys(\", \")\"])), obj), forBody);\n      }\n\n      var name = this._scope.toName(nameOrPrefix);\n\n      return this._for(new ForIter(\"in\", varKind, name, obj), function () {\n        return forBody(name);\n      });\n    } // end `for` loop\n\n  }, {\n    key: \"endFor\",\n    value: function endFor() {\n      return this._endBlockNode(For);\n    } // `label` statement\n\n  }, {\n    key: \"label\",\n    value: function label(_label) {\n      return this._leafNode(new Label(_label));\n    } // `break` statement\n\n  }, {\n    key: \"break\",\n    value: function _break(label) {\n      return this._leafNode(new Break(label));\n    } // `return` statement\n\n  }, {\n    key: \"return\",\n    value: function _return(value) {\n      var node = new Return();\n\n      this._blockNode(node);\n\n      this.code(value);\n      if (node.nodes.length !== 1) throw new Error('CodeGen: \"return\" should have one node');\n      return this._endBlockNode(Return);\n    } // `try` statement\n\n  }, {\n    key: \"try\",\n    value: function _try(tryBody, catchCode, finallyCode) {\n      if (!catchCode && !finallyCode) throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n      var node = new Try();\n\n      this._blockNode(node);\n\n      this.code(tryBody);\n\n      if (catchCode) {\n        var error = this.name(\"e\");\n        this._currNode = node.catch = new Catch(error);\n        catchCode(error);\n      }\n\n      if (finallyCode) {\n        this._currNode = node.finally = new Finally();\n        this.code(finallyCode);\n      }\n\n      return this._endBlockNode(Catch, Finally);\n    } // `throw` statement\n\n  }, {\n    key: \"throw\",\n    value: function _throw(error) {\n      return this._leafNode(new Throw(error));\n    } // start self-balancing block\n\n  }, {\n    key: \"block\",\n    value: function block(body, nodeCount) {\n      this._blockStarts.push(this._nodes.length);\n\n      if (body) this.code(body).endBlock(nodeCount);\n      return this;\n    } // end the current self-balancing block\n\n  }, {\n    key: \"endBlock\",\n    value: function endBlock(nodeCount) {\n      var len = this._blockStarts.pop();\n\n      if (len === undefined) throw new Error(\"CodeGen: not in self-balancing block\");\n      var toClose = this._nodes.length - len;\n\n      if (toClose < 0 || nodeCount !== undefined && toClose !== nodeCount) {\n        throw new Error(\"CodeGen: wrong number of nodes: \".concat(toClose, \" vs \").concat(nodeCount, \" expected\"));\n      }\n\n      this._nodes.length = len;\n      return this;\n    } // `function` heading (or definition if funcBody is passed)\n\n  }, {\n    key: \"func\",\n    value: function func(name) {\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : code_1.nil;\n      var async = arguments.length > 2 ? arguments[2] : undefined;\n      var funcBody = arguments.length > 3 ? arguments[3] : undefined;\n\n      this._blockNode(new Func(name, args, async));\n\n      if (funcBody) this.code(funcBody).endFunc();\n      return this;\n    } // end function definition\n\n  }, {\n    key: \"endFunc\",\n    value: function endFunc() {\n      return this._endBlockNode(Func);\n    }\n  }, {\n    key: \"optimize\",\n    value: function optimize() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      while (n-- > 0) {\n        this._root.optimizeNodes();\n\n        this._root.optimizeNames(this._root.names, this._constants);\n      }\n    }\n  }, {\n    key: \"_leafNode\",\n    value: function _leafNode(node) {\n      this._currNode.nodes.push(node);\n\n      return this;\n    }\n  }, {\n    key: \"_blockNode\",\n    value: function _blockNode(node) {\n      this._currNode.nodes.push(node);\n\n      this._nodes.push(node);\n    }\n  }, {\n    key: \"_endBlockNode\",\n    value: function _endBlockNode(N1, N2) {\n      var n = this._currNode;\n\n      if (n instanceof N1 || N2 && n instanceof N2) {\n        this._nodes.pop();\n\n        return this;\n      }\n\n      throw new Error(\"CodeGen: not in block \\\"\".concat(N2 ? \"\".concat(N1.kind, \"/\").concat(N2.kind) : N1.kind, \"\\\"\"));\n    }\n  }, {\n    key: \"_elseNode\",\n    value: function _elseNode(node) {\n      var n = this._currNode;\n\n      if (!(n instanceof If)) {\n        throw new Error('CodeGen: \"else\" without \"if\"');\n      }\n\n      this._currNode = n.else = node;\n      return this;\n    }\n  }, {\n    key: \"_root\",\n    get: function get() {\n      return this._nodes[0];\n    }\n  }, {\n    key: \"_currNode\",\n    get: function get() {\n      var ns = this._nodes;\n      return ns[ns.length - 1];\n    },\n    set: function set(node) {\n      var ns = this._nodes;\n      ns[ns.length - 1] = node;\n    }\n  }]);\n\n  return CodeGen;\n}();\n\nexports.CodeGen = CodeGen;\n\nfunction addNames(names, from) {\n  for (var n in from) {\n    names[n] = (names[n] || 0) + (from[n] || 0);\n  }\n\n  return names;\n}\n\nfunction addExprNames(names, from) {\n  return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\n\nfunction optimizeExpr(expr, names, constants) {\n  if (expr instanceof code_1.Name) return replaceName(expr);\n  if (!canOptimize(expr)) return expr;\n  return new code_1._Code(expr._items.reduce(function (items, c) {\n    if (c instanceof code_1.Name) c = replaceName(c);\n    if (c instanceof code_1._Code) items.push.apply(items, _toConsumableArray(c._items));else items.push(c);\n    return items;\n  }, []));\n\n  function replaceName(n) {\n    var c = constants[n.str];\n    if (c === undefined || names[n.str] !== 1) return n;\n    delete names[n.str];\n    return c;\n  }\n\n  function canOptimize(e) {\n    return e instanceof code_1._Code && e._items.some(function (c) {\n      return c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined;\n    });\n  }\n}\n\nfunction subtractNames(names, from) {\n  for (var n in from) {\n    names[n] = (names[n] || 0) - (from[n] || 0);\n  }\n}\n\nfunction not(x) {\n  return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"!\", \"\"])), par(x));\n}\n\nexports.not = not;\nvar andCode = mappend(exports.operators.AND); // boolean AND (&&) expression with the passed arguments\n\nfunction and() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return args.reduce(andCode);\n}\n\nexports.and = and;\nvar orCode = mappend(exports.operators.OR); // boolean OR (||) expression with the passed arguments\n\nfunction or() {\n  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    args[_key3] = arguments[_key3];\n  }\n\n  return args.reduce(orCode);\n}\n\nexports.or = or;\n\nfunction mappend(op) {\n  return function (x, y) {\n    return x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\", \" \", \" \", \"\"])), par(x), op, par(y));\n  };\n}\n\nfunction par(x) {\n  return x instanceof code_1.Name ? x : (0, code_1._)(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"(\", \")\"])), x);\n}","map":{"version":3,"mappings":"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","names":["Object","enumerable","get","exports","GT","code_1","GTE","LT","LTE","EQ","NEQ","NOT","OR","AND","ADD","Node","_names","_constants","Def","varKind","name","rhs","es5","_n","scope_1","var","undefined","names","constants","str","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","op","Label","label","Break","Throw","error","AnyCode","code","ParentNode","nodes","opts","reduce","n","render","i","length","optimizeNodes","Array","isArray","splice","optimizeNames","subtractNames","addNames","BlockNode","Root","Else","If","condition","else","cond","e","ns","not","_a","For","ForLoop","iteration","ForRange","from","to","ForIter","loop","iterable","Func","args","async","_async","Return","Try","catch","finally","_b","Catch","Finally","CodeGen","extScope","lines","_extScope","_scope","parent","_nodes","_root","prefix","prefixOrName","value","vs","_values","Set","add","keyOrRef","getValue","scopeName","scopeRefs","scopeCode","nameOrPrefix","constant","toName","_leafNode","_constant","_def","const","let","c","keyValues","key","push","thenBody","elseBody","_blockNode","endIf","Error","_elseNode","_endBlockNode","node","forBody","endFor","_for","arr","forRange","obj","ownProperties","forOf","tryBody","catchCode","finallyCode","_currNode","body","nodeCount","_blockStarts","endBlock","len","pop","toClose","funcBody","endFunc","N1","N2","kind","expr","replaceName","canOptimize","_items","items","some","x","par","andCode","mappend","and","orCode","or","y"],"sourceRoot":"","sources":["../../../lib/compile/codegen/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}