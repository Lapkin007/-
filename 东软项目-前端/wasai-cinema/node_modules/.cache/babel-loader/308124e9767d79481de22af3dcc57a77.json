{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { UserInfo } from \"@/api/user\";\nimport { SearchFilm } from \"@/api/film\";\nexport default {\n  data() {\n    return {\n      //定义\n      Login_text: \"登录\",\n      //初始化设置,导航栏\n      name: \"header\",\n      //定义导航数\n      navnum: 0,\n      //定义导航选中样式，首页，电影，活动，留言\n      color1: {\n        color: \"#5b5d63\"\n      },\n      color2: {\n        color: \"#5b5d63\"\n      },\n      color3: {\n        color: \"#5b5d63\"\n      },\n      color4: {\n        color: \"#5b5d63\"\n      },\n      linkcolor: [\"#5b5d63\", \"#5b5d63\", \"#5b5d63\", \"#5b5d63\"],\n      ishow: false,\n      //搜索\n      search: \"\",\n      searchlist: [],\n      //用户名头像\n      nickname: \"未登录\",\n      avatar: require(\"../../assets/img/avatar.png\")\n    };\n  },\n\n  methods: {\n    showlist: function () {\n      this.ishow = true;\n    },\n    closelist: function () {\n      this.ishow = false;\n    },\n\n    changecolor(n) {\n      this.$store.state.navnum = n;\n    },\n\n    // 检测登录\n    isLogin() {\n      if (localStorage.getItem(\"uid\") == null) {\n        this.$confirm('未检测到登录', '提示', {\n          confirmButtonText: '去登陆',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push(\"/login\");\n        });\n      }\n\n      if (localStorage.getItem(\"uid\") != null) {\n        this.$router.push(\"/personal_center\");\n      }\n    },\n\n    //搜索栏-模糊查询\n    querySearchAsync(queryString, cb) {\n      SearchFilm().then(res => {\n        setTimeout(() => {\n          this.searchlist = res.data;\n          cb(this.loadSearchList());\n        }, 100);\n      });\n    },\n\n    handleSelect(item) {\n      this.$router.push(\"/film_detail?fid=\" + item.id);\n      window.setTimeout(function () {\n        window.location.reload();\n      }, 1000);\n    },\n\n    //加载搜索列表\n    loadSearchList() {\n      let arr = new Array();\n\n      for (let i = 0; i < this.searchlist.length; i++) {\n        if (this.searchlist[i].name.indexOf(this.search) > -1) {\n          arr.push({\n            id: this.searchlist[i].id,\n            value: this.searchlist[i].name\n          });\n        }\n      }\n\n      ;\n      return arr;\n    },\n\n    //导航栏定位TAB\n    changeActiveTab(n) {\n      if (n == 1) {\n        this.$store.state.activeTab = \"first\";\n        this.isLogin();\n      }\n\n      if (n == 2) {\n        this.$store.state.activeTab = \"second\";\n        this.isLogin();\n      }\n\n      if (n == 3) {\n        this.$store.state.activeTab = \"third\";\n        this.isLogin();\n      }\n    },\n\n    // 退出登录\n    quit_login() {\n      localStorage.removeItem(\"uid\");\n      localStorage.removeItem(\"token\");\n      this.nickname = \"未登录\";\n      this.$router.push(\"/login\");\n    },\n\n    //查询个人信息\n    QueryUserInfo(uid) {\n      if (uid != null) {\n        console.log(uid);\n        const vo = {\n          id: localStorage.getItem(\"uid\")\n        };\n        console.log(vo);\n        UserInfo(vo).then(res => {\n          if (res.code == 200) {\n            this.nickname = res.data.nickname;\n            this.avatar = res.data.avatar;\n            console.log(\"查询个人信息header中的QueryUserInfo\");\n            console.log(res);\n            this.$store.state.islogin = true;\n          }\n        });\n      } else {\n        console.log(\"ID未找到,请登录\");\n      }\n    }\n\n  },\n  created: function () {\n    console.log(this.$store.state.navnum);\n    console.log(\"上面为显示页面代码\");\n\n    if (this.$store.state.navnum == 0) {\n      this.color1.color = \"blue\";\n    }\n\n    ;\n\n    if (this.$store.state.navnum == 1) {\n      this.color2.color = \"blue\";\n    }\n\n    ;\n\n    if (this.$store.state.navnum == 2) {\n      this.color3.color = \"blue\";\n    }\n\n    ;\n\n    if (this.$store.state.navnum == 3) {\n      this.color4.color = \"blue\";\n    }\n\n    ;\n  },\n  mounted: function () {\n    console.log(\"取UID\");\n    console.log(localStorage.getItem(\"uid\"));\n    console.log(\"取token\");\n    console.log(localStorage.getItem(\"token\"));\n    this.QueryUserInfo(localStorage.getItem(\"uid\"));\n\n    if (localStorage.getItem(\"uid\") != null) {\n      this.Login_text = \"退出登录\";\n    } else {\n      this.Login_text = \"登录\";\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACAA;AACA;AACA;AACAC,sBAFA;AAGA;AACAC,oBAJA;AAKA;AACAC,eANA;AAOA;AACAC;AAAAC;AAAA,OARA;AAQAC;AAAAD;AAAA,OARA;AAQAE;AAAAF;AAAA,OARA;AAQAG;AAAAH;AAAA,OARA;AASAI,6DATA;AAUAC,kBAVA;AAWA;AACAC,gBAZA;AAaAC,oBAbA;AAcA;AACAC,qBAfA;AAgBAC;AAhBA;AAkBA,GApBA;;AAqBAC;AACAC;AACA;AACA,KAHA;AAIAC;AACA;AACA,KANA;;AAOAC;AACA;AAEA,KAVA;;AAWA;AACAC;AACA;AACA;AACAC,kCADA;AAEAC,gCAFA;AAGAC;AAHA,WAIAC,IAJA,CAIA;AACA;AACA,SANA;AAMA;;AACA,+CACA;AAAA;AAAA;AACA,KAvBA;;AAwBA;AACAC;AAEAC;AACAC;AACA;AACAC;AACA,SAHA,EAGA,GAHA;AAKA,OANA;AASA,KApCA;;AAqCAC;AACA;AACAC;AACAA;AACA,OAFA,EAEA,IAFA;AAGA,KA1CA;;AA2CA;AACAC;AACA;;AACA;AACA;AACAC;AACAC,qCADA;AAEAC;AAFA;AAGA;AACA;;AAAA;AACA;AACA,KAtDA;;AAwDA;AACAC;AACA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;AAAA;AACA,KA7DA;;AA8DA;AACAC;AACAC;AACAA;AACA;AACA;AACA,KApEA;;AAqEA;AACAC;AAEA;AACAC;AACA;AAAAN;AAAA;AACAM;AACAC,iCACA;AACA;AACA;AAAA;AACAD;AACAA;AACA;AACA;AACA,SARA;AASA,OAbA,MAcA;AACAA;AACA;AACA;;AAzFA,GArBA;AAgHAE;AACAF;AACAA;;AACA,uCACA;AAAA;AAAA;;AAAA;;AACA,uCACA;AAAA;AAAA;;AAAA;;AACA,uCACA;AAAA;AAAA;;AAAA;;AACA,uCACA;AAAA;AAAA;;AAAA;AACA,GA3HA;AA4HAG;AACAH;AACAA;AACAA;AACAA;AACA;;AACA;AACA;AACA,KAFA,MAGA;AAAA;AAAA;AACA;AAtIA","names":["data","Login_text","name","navnum","color1","color","color2","color3","color4","linkcolor","ishow","search","searchlist","nickname","avatar","methods","showlist","closelist","changecolor","isLogin","confirmButtonText","cancelButtonText","type","then","querySearchAsync","SearchFilm","setTimeout","cb","handleSelect","window","loadSearchList","arr","id","value","changeActiveTab","quit_login","localStorage","QueryUserInfo","console","UserInfo","created","mounted"],"sourceRoot":"src/components/layout","sources":["Header.vue"],"sourcesContent":["<template>\r\n  <div name=\"header\">\r\n       <!-- 头部分 -->\r\n     <el-header>\r\n      <el-row>\r\n          \r\n          <el-col :offset=\"4\" :span=\"3\">\r\n              <div class=\"logobox\">\r\n              <img src=\"../../assets/img/logo.png\" />\r\n              <div class=\"logotext\">哇塞影院</div></div>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n              <el-link class=\"link_btn\" href=\"#/\" :underline=\"false\" active-class=\"active\" :style=\"$store.state.color1\" @click=\"changecolor(1)\" >首页</el-link>\r\n              <el-link class=\"link_btn\" href=\"#/movie_page\" :underline=\"false\" active-class=\"active\" :style=\"$store.state.color2\" @click=\"changecolor(2)\">电影</el-link>\r\n              <el-link class=\"link_btn\" href=\"#/activities\" :underline=\"false\" active-class=\"active\" :style=\"$store.state.color3\" @click=\"changecolor(3)\">活动</el-link>\r\n              <el-link class=\"link_btn\" href=\"#/comment\" :underline=\"false\" active-class=\"active\" :style=\"$store.state.color4\" @click=\"changecolor(4)\"> 留言</el-link>\r\n              <el-link class=\"link_btn\" href=\"#/worker_login\" :underline=\"false\" active-class=\"active\"  > 客服登录</el-link>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n              <!-- <el-input placeholder=\"请输入电影名\" v-model=\"search\" class=\"search_movie\" clearable prefix-icon=\"el-icon-search\"></el-input> \r\n              -->\r\n              <div class=\"header-search\">\r\n          <el-autocomplete\r\n            style=\"width: 350px;margin-top:20px\"\r\n            v-model=\"search\"\r\n            :fetch-suggestions=\"querySearchAsync\"\r\n            placeholder=\"请输入电影名\"\r\n            @select=\"handleSelect\"\r\n            prefix-icon=\"el-icon-search\"\r\n          />\r\n          </div>\r\n          </el-col>\r\n          \r\n          <el-col :span=\"4\" :offset=\"2\" class=\"head\" >\r\n              <div class=\"headimg\"><img\r\n             style=\"width: 50px; height: 50px\"\r\n              :src=\"avatar\"\r\n              />\r\n              </div>\r\n              <button  class=\"headimg_name\" @mouseenter=\"showlist\" @mouseleave=\"closelist\">{{nickname}}</button>\r\n           </el-col>\r\n          \r\n      </el-row>\r\n     </el-header>\r\n     <!-- 头部分结束 -->\r\n    <!-- 用户名选中列表 -->\r\n     <ul class=\"choosebox\" v-show=\"ishow\" @mouseenter=\"showlist\" @mouseleave=\"closelist\">\r\n         <a href=\"#\" @click.prevent=\"changeActiveTab(1)\"> <li>购物车</li></a>\r\n         <a href=\"#\" @click.prevent=\"changeActiveTab(2)\"> <li>我的订单</li></a>\r\n         <a href=\"#\" @click.prevent=\"changeActiveTab(3)\"> <li>个人设置</li></a>\r\n         <a href=\"#\" @click=\"quit_login()\"> <li ><i class=\"el-icon-switch-button\"></i>{{Login_text}}</li></a>\r\n     </ul>\r\n    <!-- 用户名选中列表结束 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport{UserInfo} from \"@/api/user\";\r\nimport{SearchFilm} from \"@/api/film\";\r\nexport default {\r\ndata(){\r\n        return{\r\n            //定义\r\n            Login_text:\"登录\",\r\n            //初始化设置,导航栏\r\n            name:\"header\",\r\n            //定义导航数\r\n            navnum:0,\r\n            //定义导航选中样式，首页，电影，活动，留言\r\n            color1:{color:\"#5b5d63\"},color2:{color:\"#5b5d63\"},color3:{color:\"#5b5d63\"},color4:{color:\"#5b5d63\"},\r\n            linkcolor:[\"#5b5d63\",\"#5b5d63\",\"#5b5d63\",\"#5b5d63\"],\r\n            ishow:false,\r\n            //搜索\r\n            search:\"\",\r\n            searchlist:[],\r\n            //用户名头像\r\n            nickname:\"未登录\",  \r\n            avatar:require(\"../../assets/img/avatar.png\"),\r\n        }\r\n    },\r\n    methods:{\r\n        showlist:function(){\r\n            this.ishow=true;\r\n        },\r\n        closelist:function(){\r\n            this.ishow=false;\r\n        },\r\n        changecolor(n){\r\n            this.$store.state.navnum=n;\r\n\r\n        },\r\n        // 检测登录\r\n        isLogin() {\r\n        if(localStorage.getItem(\"uid\")==null){\r\n        this.$confirm('未检测到登录', '提示', {\r\n          confirmButtonText: '去登陆',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.push(\"/login\");\r\n        });}\r\n        if(localStorage.getItem(\"uid\")!=null)\r\n        {this.$router.push(\"/personal_center\");}\r\n        },\r\n        //搜索栏-模糊查询\r\n        querySearchAsync(queryString,cb){\r\n            \r\n                SearchFilm().then((res)=>{\r\n                    setTimeout(() => {\r\n                    this.searchlist=res.data; \r\n                    cb(this.loadSearchList())\r\n                }, 100);\r\n                \r\n                });\r\n\r\n            \r\n        },\r\n        handleSelect(item){\r\n           this.$router.push(\"/film_detail?fid=\"+item.id);\r\n           window.setTimeout(function () {\r\n             window.location.reload();\r\n      },1000)\r\n        },\r\n        //加载搜索列表\r\n        loadSearchList(){\r\n            let arr=new Array();\r\n            for(let i=0;i<this.searchlist.length;i++){\r\n                if(this.searchlist[i].name.indexOf(this.search) > -1){\r\n                  arr.push({\r\n                    id:this.searchlist[i].id,\r\n                    value:this.searchlist[i].name,\r\n                });        }\r\n            };\r\n            return arr;\r\n        },\r\n\r\n        //导航栏定位TAB\r\n        changeActiveTab(n){\r\n           if(n==1){this.$store.state.activeTab=\"first\";this.isLogin();}\r\n           if(n==2){this.$store.state.activeTab=\"second\";this.isLogin();}\r\n           if(n==3){this.$store.state.activeTab=\"third\";this.isLogin();}\r\n        },\r\n        // 退出登录\r\n        quit_login(){\r\n             localStorage.removeItem(\"uid\");\r\n             localStorage.removeItem(\"token\");\r\n             this.nickname=\"未登录\";\r\n             this.$router.push(\"/login\");\r\n        },\r\n        //查询个人信息\r\n        QueryUserInfo(uid){\r\n            \r\n            if(uid!=null){\r\n                console.log(uid);\r\n                const vo={id:localStorage.getItem(\"uid\")};\r\n                 console.log(vo);\r\n            UserInfo(vo).then((res)=>\r\n            {\r\n                if(res.code==200){   \r\n                this.nickname=res.data.nickname; this.avatar=res.data.avatar;\r\n                console.log(\"查询个人信息header中的QueryUserInfo\");\r\n                console.log(res);\r\n                this.$store.state.islogin=true;\r\n                }\r\n            })\r\n        }\r\n        else{\r\n            console.log(\"ID未找到,请登录\")\r\n        }\r\n        },\r\n    },\r\n    created:function(){\r\n         console.log(this.$store.state.navnum);\r\n        console.log(\"上面为显示页面代码\");\r\n            if(this.$store.state.navnum==0)\r\n\t\t\t{this.color1.color=\"blue\"};\r\n            if(this.$store.state.navnum==1)\r\n\t\t\t{this.color2.color=\"blue\"};\r\n            if(this.$store.state.navnum==2)\r\n\t\t\t{this.color3.color=\"blue\"};\r\n            if(this.$store.state.navnum==3)\r\n\t\t\t{this.color4.color=\"blue\"};\r\n\t\t},\r\n        mounted:function(){\r\n        console.log(\"取UID\");\r\n        console.log(localStorage.getItem(\"uid\"));\r\n        console.log(\"取token\");\r\n        console.log(localStorage.getItem(\"token\"));\r\n        this.QueryUserInfo(localStorage.getItem(\"uid\"));\r\n        if(localStorage.getItem(\"uid\")!=null){\r\n            this.Login_text=\"退出登录\";\r\n        }\r\n        else{this.Login_text=\"登录\"}\r\n    }\r\n\t\t\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.active{\r\n    background-color: blue !important;\r\n}\r\n.el-row{\r\n    /* background-color: blue; */\r\n   overflow: hidden;\r\n}\r\n.el-col{\r\n    /* background-color: rgb(25, 97, 46); */\r\n    overflow: hidden;\r\n    height: 70px;\r\n}\r\n.mainpage{\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\n.el-container{\r\n    background-color: #fff;\r\n    margin-top: 20px;\r\n}\r\n.el-header{\r\n    background-color: rgb(255, 255, 255);\r\n    color: honeydew;\r\n    min-height:100px;\r\n}\r\n\r\n.el-aside{\r\n    background-color:darkslategray;\r\n    color: honeydew;\r\n    height: 160px;\r\n    max-width: 90px;\r\n}\r\n.el-main{\r\n    background-color: blueviolet;\r\n    color: honeydew;\r\n    height: 1800px;\r\n}\r\n.link_btn{\r\n    font-size:18px;\r\n    margin-top: 28px;\r\n    margin-right: 27px;\r\n    color:#5b5d63;\r\n    \r\n}\r\n\r\n\r\n.search_movie{\r\n    margin-top: 18px;\r\n}\r\n.headimg{\r\n    margin-top: 10px;\r\n    border-radius: 30px;\r\n    width: 50px;\r\n    height: 50px;\r\n    overflow: hidden;\r\n    background-color: #91949c;\r\n    float: left;\r\n    border: 1px solid rgb(136, 135, 135);\r\n    background-image:src(\"../assets/img/nim.png\");\r\n}\r\n.headimg_name{\r\n    height:70px;\r\n    line-height: 70px;\r\n    margin: auto 10px;\r\n    width:100px;\r\n    background-color: transparent;\r\n    border-style: none;\r\n}\r\n.headimg_name:hover{\r\n    color: blue;\r\n}\r\n\r\n.choosebox{\r\n    position:absolute;\r\n    width:200px ;\r\n    height:200px;\r\n    left: 77.5%;\r\n    top:8.2%;\r\n    list-style-type: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    background-color:rgb(238, 238, 238);\r\n    border-radius: 10px;\r\n    z-index: 8;\r\n}\r\n.head:hover .choosebox{\r\n    display: none;\r\n}\r\n.choosebox a{\r\n    text-decoration: none;\r\n    color: black;\r\n}\r\n.choosebox li{\r\n    \r\n    position: relative;\r\n    display:block;\r\n    width:200px;\r\n    height:50px;\r\n    line-height: 50px;\r\n    text-align: center;\r\n}\r\n.choosebox li:hover{\r\n    background-color: royalblue;\r\n}\r\n.el-icon-switch-button{\r\n    font-size:23px;\r\n    margin-right: 10px;\r\n    \r\n}\r\n.logobox img{\r\n    width:60px;\r\n    height:60px;\r\n    float:left;\r\n    margin-top: 5px;\r\n    \r\n}\r\n.logotext{\r\n    float: left;\r\n    line-height: 75px;\r\n    font-size:28px;\r\n    font-weight: 600;\r\n    margin-left:10px ;\r\n    color: black;\r\n}\r\n/* 头部和底部结束 */\r\n</style>"]},"metadata":{},"sourceType":"module"}