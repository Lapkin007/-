{"ast":null,"code":"\"use strict\";\n\nvar _typeof = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/typeof.js\").default;\n\nvar _taggedTemplateLiteral = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js\").default;\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateAdditionalItems = void 0;\n\nvar codegen_1 = require(\"../../compile/codegen\");\n\nvar util_1 = require(\"../../compile/util\");\n\nvar error = {\n  message: function message(_ref) {\n    var len = _ref.params.len;\n    return (0, codegen_1.str)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"must NOT have more than \", \" items\"])), len);\n  },\n  params: function params(_ref2) {\n    var len = _ref2.params.len;\n    return (0, codegen_1._)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"{limit: \", \"}\"])), len);\n  }\n};\nvar def = {\n  keyword: \"additionalItems\",\n  type: \"array\",\n  schemaType: [\"boolean\", \"object\"],\n  before: \"uniqueItems\",\n  error: error,\n  code: function code(cxt) {\n    var parentSchema = cxt.parentSchema,\n        it = cxt.it;\n    var items = parentSchema.items;\n\n    if (!Array.isArray(items)) {\n      (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n      return;\n    }\n\n    validateAdditionalItems(cxt, items);\n  }\n};\n\nfunction validateAdditionalItems(cxt, items) {\n  var gen = cxt.gen,\n      schema = cxt.schema,\n      data = cxt.data,\n      keyword = cxt.keyword,\n      it = cxt.it;\n  it.items = true;\n  var len = gen.const(\"len\", (0, codegen_1._)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\", \".length\"])), data));\n\n  if (schema === false) {\n    cxt.setParams({\n      len: items.length\n    });\n    cxt.pass((0, codegen_1._)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\", \" <= \", \"\"])), len, items.length));\n  } else if (_typeof(schema) == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n    var valid = gen.var(\"valid\", (0, codegen_1._)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\", \" <= \", \"\"])), len, items.length)); // TODO var\n\n    gen.if((0, codegen_1.not)(valid), function () {\n      return validateItems(valid);\n    });\n    cxt.ok(valid);\n  }\n\n  function validateItems(valid) {\n    gen.forRange(\"i\", items.length, len, function (i) {\n      cxt.subschema({\n        keyword: keyword,\n        dataProp: i,\n        dataPropType: util_1.Type.Num\n      }, valid);\n      if (!it.allErrors) gen.if((0, codegen_1.not)(valid), function () {\n        return gen.break();\n      });\n    });\n  }\n}\n\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;","map":{"version":3,"mappings":"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","names":["error","message","len","params","def","keyword","type","schemaType","before","code","cxt","parentSchema","it","items","Array","isArray","validateAdditionalItems","gen","schema","data","const","setParams","length","pass","valid","var","if","validateItems","ok","forRange","i","subschema","dataProp","dataPropType","util_1","Num","allErrors","break","exports"],"sourceRoot":"","sources":["../../../lib/vocabularies/applicator/additionalItems.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}