{"ast":null,"code":"\"use strict\";\n\nvar _taggedTemplateLiteral = require(\"E:/DW/wasai-cinema/node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js\").default;\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.assignDefaults = void 0;\n\nvar codegen_1 = require(\"../codegen\");\n\nvar util_1 = require(\"../util\");\n\nfunction assignDefaults(it, ty) {\n  var _it$schema = it.schema,\n      properties = _it$schema.properties,\n      items = _it$schema.items;\n\n  if (ty === \"object\" && properties) {\n    for (var key in properties) {\n      assignDefault(it, key, properties[key].default);\n    }\n  } else if (ty === \"array\" && Array.isArray(items)) {\n    items.forEach(function (sch, i) {\n      return assignDefault(it, i, sch.default);\n    });\n  }\n}\n\nexports.assignDefaults = assignDefaults;\n\nfunction assignDefault(it, prop, defaultValue) {\n  var gen = it.gen,\n      compositeRule = it.compositeRule,\n      data = it.data,\n      opts = it.opts;\n  if (defaultValue === undefined) return;\n  var childData = (0, codegen_1._)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\", \"\", \"\"])), data, (0, codegen_1.getProperty)(prop));\n\n  if (compositeRule) {\n    (0, util_1.checkStrictMode)(it, \"default is ignored for: \".concat(childData));\n    return;\n  }\n\n  var condition = (0, codegen_1._)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\", \" === undefined\"])), childData);\n\n  if (opts.useDefaults === \"empty\") {\n    condition = (0, codegen_1._)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\", \" || \", \" === null || \", \" === \\\"\\\"\"])), condition, childData, childData);\n  } // `${childData} === undefined` +\n  // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n\n\n  gen.if(condition, (0, codegen_1._)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\", \" = \", \"\"])), childData, (0, codegen_1.stringify)(defaultValue)));\n}","map":{"version":3,"mappings":";;;;;;;;;;;;;;;AACA;;AACA;;AAEA,SAAgBA,cAAhB,CAA+BC,EAA/B,EAAiDC,EAAjD,EAA4D;AAC1D,mBAA4BD,EAAE,CAACE,MAA/B;AAAA,MAAOC,UAAP,cAAOA,UAAP;AAAA,MAAmBC,KAAnB,cAAmBA,KAAnB;;AACA,MAAIH,EAAE,KAAK,QAAP,IAAmBE,UAAvB,EAAmC;AACjC,SAAK,IAAME,GAAX,IAAkBF,UAAlB,EAA8B;AAC5BG,mBAAa,CAACN,EAAD,EAAKK,GAAL,EAAUF,UAAU,CAACE,GAAD,CAAV,CAAgBE,OAA1B,CAAb;AACD;AACF,GAJD,MAIO,IAAIN,EAAE,KAAK,OAAP,IAAkBO,KAAK,CAACC,OAAN,CAAcL,KAAd,CAAtB,EAA4C;AACjDA,SAAK,CAACM,OAAN,CAAc,UAACC,GAAD,EAAMC,CAAN;AAAA,aAAoBN,aAAa,CAACN,EAAD,EAAKY,CAAL,EAAQD,GAAG,CAACJ,OAAZ,CAAjC;AAAA,KAAd;AACD;AACF;;AATDM;;AAWA,SAASP,aAAT,CAAuBN,EAAvB,EAAyCc,IAAzC,EAAgEC,YAAhE,EAAqF;AACnF,MAAOC,GAAP,GAAyChB,EAAzC,CAAOgB,GAAP;AAAA,MAAYC,aAAZ,GAAyCjB,EAAzC,CAAYiB,aAAZ;AAAA,MAA2BC,IAA3B,GAAyClB,EAAzC,CAA2BkB,IAA3B;AAAA,MAAiCC,IAAjC,GAAyCnB,EAAzC,CAAiCmB,IAAjC;AACA,MAAIJ,YAAY,KAAKK,SAArB,EAAgC;AAChC,MAAMC,SAAS,IAAG,cAAH,+EAAOH,IAAP,EAAc,2BAAYJ,IAAZ,CAAd,CAAf;;AACA,MAAIG,aAAJ,EAAmB;AACjB,gCAAgBjB,EAAhB,oCAA+CqB,SAA/C;AACA;AACD;;AAED,MAAIC,SAAS,IAAG,cAAH,2FAAOD,SAAP,CAAb;;AACA,MAAIF,IAAI,CAACI,WAAL,KAAqB,OAAzB,EAAkC;AAChCD,aAAS,IAAG,cAAH,+GAAOA,SAAP,EAAuBD,SAAvB,EAAgDA,SAAhD,CAAT;AACD,GAZkF,CAanF;AACA;;;AACAL,KAAG,CAACQ,EAAJ,CAAOF,SAAP,GAAkB,cAAlB,oFAAsBD,SAAtB,EAAqC,yBAAUN,YAAV,CAArC;AACD","names":["assignDefaults","it","ty","schema","properties","items","key","assignDefault","default","Array","isArray","forEach","sch","i","exports","prop","defaultValue","gen","compositeRule","data","opts","undefined","childData","condition","useDefaults","if"],"sourceRoot":"","sources":["../../../lib/compile/validate/defaults.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}