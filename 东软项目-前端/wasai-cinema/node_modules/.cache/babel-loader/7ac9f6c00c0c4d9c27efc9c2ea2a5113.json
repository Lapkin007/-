{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { QueryAdminAccount, QueryAdminInfo } from \"@/api/admin\";\nexport default {\n  data: function data() {\n    return {\n      admin_info: {},\n      admin_id: this.$route.query.id,\n      admin_pwd: this.$route.query.pwd\n    };\n  },\n  methods: {\n    //查询管理员接口\n    QueryAdminInfomatioan: function QueryAdminInfomatioan() {\n      var _this = this;\n\n      QueryAdminInfo(parseInt(localStorage.getItem(\"admin_id\"))).then(function (res) {\n        if (res.code == 200) {\n          _this.admin_info = res.data.admin;\n        } else {\n          _this.$message.error(\"管理员信息查询失败\");\n        }\n      });\n    },\n    //管理员登录接口\n    Admin_login: function Admin_login() {\n      var _this2 = this;\n\n      if (this.admin_id != undefined & this.admin_pwd != undefined) {\n        //定义一个VO，传入接口\n        var vo = {\n          admin_id: this.admin_id,\n          admin_pwd: this.admin_pwd\n        };\n        QueryAdminAccount(vo).then(function (res) {\n          if (res.code == 200) {\n            if (res.data.success == \"fail\") {\n              _this2.$message.error(res.data.msg);\n\n              window.location.href = \"#/\";\n              localStorage.setItem(\"admin\", \"false\");\n              localStorage.removeItem('admin_id');\n            }\n\n            if (res.data.success == \"success\") {\n              _this2.$message({\n                message: res.data.msg,\n                type: res.data.success\n              });\n\n              localStorage.setItem(\"admin\", \"true\"); //把ID保存\n\n              localStorage.setItem(\"admin_id\", res.data.admin.id);\n              _this2.admin_info = res.data.admin;\n              console.log(\"LocalStorage:admin_id\" + localStorage.getItem(\"admin_id\"));\n            }\n          }\n        });\n      } else {\n        this.$message.error(\"登陆失败\");\n        localStorage.setItem(\"admin\", \"false\");\n        localStorage.removeItem('admin_id');\n        window.location.href = \"#/\";\n      }\n    },\n    //打开方法\n    handleOpen: function handleOpen(key, keyPath) {\n      console.log(key, keyPath);\n    },\n    //关闭方法\n    handleClose: function handleClose(key, keyPath) {\n      console.log(key, keyPath);\n    },\n    //点击相应标签的方法\n    HandleClickOrderList: function HandleClickOrderList() {\n      window.location.href = \"#/admin_panel/order_manage\"; //this.$router.push(\"./admin_panel/order_manage\");//会出现连续点击跳转错误的问题\n    },\n    HandleClickOrderErrorReport: function HandleClickOrderErrorReport() {\n      window.location.href = \"#/admin_panel/order_error_report\"; //this.$router.push(\"./admin_panel/order_error_report\");//会出现连续点击跳转错误的问题\n    },\n    HandleClickStaffAdd: function HandleClickStaffAdd() {\n      window.location.href = \"#/admin_panel/staff_add\"; //this.$router.push(\"./admin_panel/order_error_report\");//会出现连续点击跳转错误的问题\n    },\n    HandleClickUserManage: function HandleClickUserManage() {\n      window.location.href = \"#/admin_panel/user_manage\"; //this.$router.push(\"./admin_panel/order_error_report\");//会出现连续点击跳转错误的问题\n    }\n  },\n  created: function created() {\n    console.log(this.admin_id + \" \" + this.admin_pwd);\n    this.Admin_login();\n    this.QueryAdminInfomatioan();\n  },\n  mounted: function mounted() {\n    this.QueryAdminInfomatioan();\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACAA,MADA,kBACA;AACA;AACAC,oBADA;AAEAC,oCAFA;AAGAC;AAHA;AAKA,GAPA;AASAC;AACA;AACAC,yBAFA,mCAEA;AAAA;;AAEAC;AACA,6BACA;AAEA;AACA,SAJA,MAKA;AACA;AACA;AACA,OATA;AAUA,KAdA;AAeA;AACAC,eAhBA,yBAgBA;AAAA;;AACA,oEACA;AACA;AACA;AACAL,iCADA;AAEAC;AAFA;AAIAK;AACA;AACA,4CACA;AACA;;AACAC;AACAC;AACAA;AACA;;AACA,+CACA;AAEA;AAAAC;AAAAC;AAAA;;AACAF,oDAHA,CAIA;;AACAA;AACA;AACAG;AACA;AACA;AACA,SApBA;AAqBA,OA5BA,MA6BA;AACA;AACAH;AACAA;AACAD;AACA;AACA,KApDA;AAqDA;AACAK,cAtDA,sBAsDAC,GAtDA,EAsDAC,OAtDA,EAsDA;AACAH;AACA,KAxDA;AAyDA;AACAI,eA1DA,uBA0DAF,GA1DA,EA0DAC,OA1DA,EA0DA;AACAH;AACA,KA5DA;AA6DA;AACAK,wBA9DA,kCA8DA;AACAT,0DADA,CAEA;AACA,KAjEA;AAkEAU,+BAlEA,yCAkEA;AACAV,gEADA,CAEA;AACA,KArEA;AAsEAW,uBAtEA,iCAsEA;AACAX,uDADA,CAEA;AACA,KAzEA;AA0EAY,yBA1EA,mCA0EA;AACAZ,yDADA,CAEA;AACA;AA7EA,GATA;AAyFAa;AAEAT;AACA;AACA;AACA,GA9FA;AA+FAU;AACA;AACA;AAjGA","names":["data","admin_info","admin_id","admin_pwd","methods","QueryAdminInfomatioan","QueryAdminInfo","Admin_login","QueryAdminAccount","window","localStorage","message","type","console","handleOpen","key","keyPath","handleClose","HandleClickOrderList","HandleClickOrderErrorReport","HandleClickStaffAdd","HandleClickUserManage","created","mounted"],"sourceRoot":"src/views","sources":["admin_panel.vue"],"sourcesContent":["<template>\r\n  <div>\r\n      <el-container class=\"out\">\r\n          <!-- 侧边栏-管理面板 -->\r\n          <el-aside class=\"side\">\r\n            <el-menu\r\n      default-active=\"2\"\r\n      class=\"el-menu\"\r\n      @open=\"handleOpen\"\r\n      @close=\"handleClose\"\r\n      background-color=\"#545c64\"\r\n      text-color=\"#fff\"\r\n      active-text-color=\"lightblue\">\r\n      <img style=\"width:80px;height:80px;display:inline-block;position:relative;top:30px;margin-left:30px\" src=\"../assets/img/logo.png\">\r\n      <span style=\"width:100px;height:80px;display:inline-block;font-size:20px;color:white;margin-left:5px\">后台管理</span>\r\n      <el-submenu index=\"1\">\r\n        <template slot=\"title\">\r\n          <i class=\"el-icon-location\" style=\"color:white\"></i>\r\n          <span>影视管理</span>\r\n        </template>\r\n        <el-menu-item-group>\r\n          <el-menu-item index=\"1-1\">电影列表</el-menu-item>\r\n          <el-menu-item index=\"1-2\">院线排片</el-menu-item>\r\n          <el-menu-item index=\"1-3\">新增电影</el-menu-item>\r\n          <el-menu-item index=\"1-4\">轮播海报</el-menu-item>\r\n        </el-menu-item-group>\r\n        </el-submenu>\r\n      <el-submenu index=\"2\">\r\n          <template slot=\"title\">\r\n        <i class=\"el-icon-menu\" style=\"color:white\"></i>\r\n        <span slot=\"title\">用户管理</span>\r\n          </template>\r\n          <el-menu-item index=\"2-1\" @click=\"HandleClickUserManage()\">用户列表</el-menu-item>\r\n      </el-submenu>\r\n      <el-submenu index=\"3\">\r\n          <template slot=\"title\">\r\n        <i class=\"el-icon-menu\" style=\"color:white\"></i>\r\n        <span slot=\"title\" >订单管理</span>\r\n          </template>\r\n          <el-menu-item index=\"3-1\" @click=\"HandleClickOrderList()\">订单列表</el-menu-item>\r\n          <el-menu-item index=\"3-2\" @click=\"HandleClickOrderErrorReport()\">异常订单</el-menu-item>\r\n      </el-submenu>\r\n      <el-submenu index=\"4\">\r\n          <template slot=\"title\">\r\n        <i class=\"el-icon-menu\" style=\"color:white\"></i>\r\n        <span slot=\"title\">员工管理</span>\r\n          </template>\r\n          <el-menu-item index=\"4-1\">员工列表</el-menu-item>\r\n          <el-menu-item index=\"4-2\" @click=\"HandleClickStaffAdd()\">新增员工</el-menu-item>\r\n      </el-submenu>\r\n    </el-menu>\r\n          </el-aside>\r\n\r\n          <!-- 显示面板 中间包含头部栏 -->\r\n          <el-main class=\"main_1\">\r\n              <!-- 头部栏 -->\r\n              <el-header class=\"header\">\r\n                  <div style=\"width:240px;height:80px;margin:0 auto\">\r\n                    <el-avatar style=\"width:80px;height:80px;display:inline-block\" :src=\"admin_info.avatar\"></el-avatar>\r\n                    <div style=\"width:130px;height:80px;float:right;line-height:80px\">{{admin_info.username}}</div>\r\n                  </div>\r\n              </el-header>\r\n\r\n\r\n              <!-- RouterView部栏 -->\r\n              <el-main class=\"main_2\">\r\n                   <router-view />\r\n              </el-main>\r\n\r\n          </el-main>\r\n      </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { QueryAdminAccount,QueryAdminInfo } from \"@/api/admin\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            admin_info:{},\r\n            admin_id:this.$route.query.id,\r\n            admin_pwd:this.$route.query.pwd,\r\n        }\r\n    },\r\n    \r\n     methods: {\r\n       //查询管理员接口\r\n       QueryAdminInfomatioan(){\r\n         \r\n         QueryAdminInfo(parseInt(localStorage.getItem(\"admin_id\"))).then((res)=>{\r\n           if(res.code==200)\r\n           {\r\n             \r\n             this.admin_info=res.data.admin;\r\n           }\r\n           else{\r\n             this.$message.error(\"管理员信息查询失败\");\r\n           }\r\n         })\r\n       },\r\n       //管理员登录接口\r\n       Admin_login(){\r\n         if(this.admin_id!=undefined&this.admin_pwd!=undefined)\r\n         {\r\n         //定义一个VO，传入接口\r\n         const vo={\r\n           admin_id:this.admin_id,\r\n           admin_pwd:this.admin_pwd,\r\n         };\r\n         QueryAdminAccount(vo).then((res)=>{\r\n           if(res.code==200){\r\n             if(res.data.success==\"fail\")\r\n             {\r\n               this.$message.error(res.data.msg);\r\n               window.location.href=\"#/\";\r\n               localStorage.setItem(\"admin\",\"false\");\r\n               localStorage.removeItem('admin_id');\r\n             }\r\n             if(res.data.success==\"success\")\r\n             {\r\n\r\n               this.$message({message:res.data.msg,type:res.data.success})\r\n               localStorage.setItem(\"admin\",\"true\");\r\n               //把ID保存\r\n               localStorage.setItem(\"admin_id\",res.data.admin.id);\r\n               this.admin_info=res.data.admin;\r\n               console.log(\"LocalStorage:admin_id\"+localStorage.getItem(\"admin_id\"));\r\n             }\r\n           }\r\n         })\r\n         }\r\n         else{\r\n           this.$message.error(\"登陆失败\");\r\n           localStorage.setItem(\"admin\",\"false\");\r\n           localStorage.removeItem('admin_id');\r\n               window.location.href=\"#/\";\r\n         }\r\n       },\r\n       //打开方法\r\n      handleOpen(key, keyPath) {\r\n        console.log(key, keyPath);\r\n      },\r\n      //关闭方法\r\n      handleClose(key, keyPath) {\r\n        console.log(key, keyPath);\r\n      },\r\n//点击相应标签的方法\r\nHandleClickOrderList(){\r\n  window.location.href=\"#/admin_panel/order_manage\";\r\n  //this.$router.push(\"./admin_panel/order_manage\");//会出现连续点击跳转错误的问题\r\n},\r\nHandleClickOrderErrorReport(){\r\n  window.location.href=\"#/admin_panel/order_error_report\";\r\n  //this.$router.push(\"./admin_panel/order_error_report\");//会出现连续点击跳转错误的问题\r\n},\r\nHandleClickStaffAdd(){\r\n  window.location.href=\"#/admin_panel/staff_add\";\r\n  //this.$router.push(\"./admin_panel/order_error_report\");//会出现连续点击跳转错误的问题\r\n},\r\nHandleClickUserManage(){\r\n  window.location.href=\"#/admin_panel/user_manage\";\r\n  //this.$router.push(\"./admin_panel/order_error_report\");//会出现连续点击跳转错误的问题\r\n},\r\n\r\n    },\r\n    created:function(){\r\n     \r\n       console.log(this.admin_id+\" \"+this.admin_pwd);\r\n       this.Admin_login();\r\n       this.QueryAdminInfomatioan();\r\n    },\r\n    mounted:function(){\r\n      this.QueryAdminInfomatioan();\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.out{background-color: blueviolet;width:1500px;height:870px;padding: 0px;margin: 0 auto;overflow: hidden !important;}\r\n.side{width:250px !important;min-height:800px;background-color:#545c64;overflow: hidden !important;}\r\n.main_1{min-width:1200px;min-height:800px;background-color:rgb(134, 134, 134);padding: 0px !important;margin: 0px;overflow: hidden !important;}\r\n.main_2{min-height:800px;max-height:800px;background-color:rgb(177, 177, 177);min-width:1100px;overflow: hidden !important;}\r\n.header{background-color: rgb(211, 211, 211);min-width:1100px;overflow: hidden;height:80px !important}\r\n.el-menu{\r\n    border: none !important;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}