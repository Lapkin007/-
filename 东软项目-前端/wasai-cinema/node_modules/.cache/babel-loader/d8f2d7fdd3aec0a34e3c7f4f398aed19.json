{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { QueryActivityList, UploadActivityTakeIn } from \"@/api/activity\";\nimport { parseTime } from \"@/plugins/DateTran\"; //日期格式转化\n\nexport default {\n  data() {\n    return {\n      activities: []\n    };\n  },\n\n  methods: {\n    //  查看是否登录\n    isLoginAndTakeIn(item) {\n      if (localStorage.getItem(\"uid\") == null) {\n        this.$confirm('未检测到登录', '提示', {\n          confirmButtonText: '去登陆',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push(\"/login\");\n        });\n      } else {\n        var aidNo = item.id;\n        const vo = {\n          create_time: new Date(),\n          update_time: new Date(),\n          aid: parseInt(aidNo),\n          uid: parseInt(localStorage.getItem(\"uid\"))\n        };\n        console.log(vo);\n        UploadActivityTakeIn(vo).then(res => {\n          if (res.code == 200) {\n            if (res.data.success == \"success\") {\n              this.$message({\n                message: res.data.msg,\n                type: \"success\"\n              });\n            } else {\n              this.$message({\n                message: res.data.msg,\n                type: \"warning\"\n              });\n            }\n          } else {\n            this.$message({\n              message: res.data.msg,\n              type: \"warning\"\n            });\n          }\n        });\n      }\n    },\n\n    // 查看活动列表并输入数组\n    QueryActivity() {\n      QueryActivityList().then(res => {\n        if (res.code == 200) {\n          this.activities = res.data; //转化其中显示的日期\n\n          for (var i = 0; i < this.activities.length; i++) {\n            this.activities[i].startTime = parseTime(new Date(this.activities[i].startTime), \"{y}-{m}-{d}\");\n            this.activities[i].endTime = parseTime(new Date(this.activities[i].endTime), \"{y}-{m}-{d}\");\n          }\n\n          ;\n        }\n      });\n    }\n\n  },\n  //改变导航栏样式\n  beforeCreate: function () {\n    console.log(\"BeforeCreate\");\n    this.$store.state.navnum = 2;\n    this.$store.state.color3.color = \"blue\";\n    this.$store.state.color1.color = \"#5b5d63\";\n    this.$store.state.color2.color = \"#5b5d63\";\n    this.$store.state.color4.color = \"#5b5d63\";\n  },\n  mounted: function () {\n    //查询活动列表并生成到this.activities\n    this.QueryActivity();\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;AAgBA;AACA,+C,CAAA;;AACA;AACAA;AACA;AACAC;AADA;AAGA,GALA;;AAMAC;AACA;AACAC;AACA;AACA;AACAC,kCADA;AAEAC,gCAFA;AAGAC;AAHA,WAIAC,IAJA,CAIA;AACA;AACA,SANA;AAOA,OARA,MASA;AACA;AACA;AACAC,iCADA;AAEAC,iCAFA;AAGAC,8BAHA;AAIAC;AAJA;AAMAC;AACAC;AACA;AACA;AACA;AAAAC;AAAAR;AAAA;AACA,aAFA,MAGA;AACA;AAAAQ;AAAAR;AAAA;AACA;AACA,WAPA,MAQA;AACA;AAAAQ;AAAAR;AAAA;AACA;AACA,SAZA;AAcA;AAEA,KArCA;;AAuCA;AAEAS;AACAC;AACA;AACA,qCADA,CAEA;;AACA;AACA;AACA;AACA;;AAAA;AACA;AACA,OATA;AAUA;;AApDA,GANA;AA+DA;AACAC;AACAL;AACA;AACA;AACA;AAAA;AAAA;AACA,GArEA;AAsEAM;AACA;AACA;AACA;AAzEA","names":["data","activities","methods","isLoginAndTakeIn","confirmButtonText","cancelButtonText","type","then","create_time","update_time","aid","uid","console","UploadActivityTakeIn","message","QueryActivity","QueryActivityList","beforeCreate","mounted"],"sourceRoot":"src/views","sources":["activities.vue"],"sourcesContent":["<template>\r\n  <div class=\"activities_box\">\r\n    <el-timeline>\r\n      <el-timeline-item v-for=\"(item, index) in activities\" v-bind:key=\"index\" placement=\"top\">\r\n        <p style=\"color:gray;margin-top:-10px\">{{ item.startTime }}</p>\r\n        <el-card>\r\n          <h3><strong>活动简述:{{ item.content }}</strong></h3>\r\n          <p style=\"color:gray\">活动结束时间{{ item.endTime }}</p>\r\n          <el-link :underline=\"false\" style=\"color:rgb(0, 132, 255)\" @click=\"isLoginAndTakeIn(item)\">报名参加</el-link>\r\n        </el-card>\r\n      </el-timeline-item>\r\n    </el-timeline>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { QueryActivityList,UploadActivityTakeIn } from \"@/api/activity\"\r\nimport { parseTime } from \"@/plugins/DateTran\";//日期格式转化\r\nexport default {\r\n  data() {\r\n    return {\r\n      activities: [],\r\n    }\r\n  },\r\n  methods: {\r\n    //  查看是否登录\r\n    isLoginAndTakeIn(item) {\r\n      if (localStorage.getItem(\"uid\") == null) {\r\n        this.$confirm('未检测到登录', '提示', {\r\n          confirmButtonText: '去登陆',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.push(\"/login\");\r\n        });\r\n      }\r\n      else {\r\n        var aidNo=item.id;\r\n        const vo={\r\n          create_time:new Date(),\r\n          update_time:new Date(),\r\n          aid:parseInt(aidNo),\r\n          uid:parseInt(localStorage.getItem(\"uid\"))\r\n        };\r\n        console.log(vo);\r\n        UploadActivityTakeIn(vo).then((res)=>{\r\n          if(res.code==200){\r\n            if(res.data.success==\"success\"){\r\n                    this.$message({message:res.data.msg,type:\"success\"},)\r\n                   }\r\n                    else{\r\n                 this.$message({message:res.data.msg,type:\"warning\"},)\r\n                     }\r\n          }\r\n          else{\r\n             this.$message({message:res.data.msg,type:\"warning\"},)\r\n          }\r\n        })\r\n\r\n      }\r\n\r\n    },\r\n\r\n    // 查看活动列表并输入数组\r\n\r\n    QueryActivity() {\r\n      QueryActivityList().then((res) => {\r\n        if (res.code == 200) {\r\n          this.activities = res.data;\r\n          //转化其中显示的日期\r\n          for (var i = 0; i < this.activities.length; i++) {\r\n            this.activities[i].startTime = parseTime(new Date(this.activities[i].startTime), \"{y}-{m}-{d}\");\r\n            this.activities[i].endTime = parseTime(new Date(this.activities[i].endTime), \"{y}-{m}-{d}\");\r\n          };\r\n        }\r\n      })\r\n    }\r\n\r\n\r\n\r\n  },\r\n  //改变导航栏样式\r\n  beforeCreate: function () {\r\n    console.log(\"BeforeCreate\");\r\n    this.$store.state.navnum = 2;\r\n    this.$store.state.color3.color = \"blue\";\r\n    this.$store.state.color1.color = \"#5b5d63\"; this.$store.state.color2.color = \"#5b5d63\"; this.$store.state.color4.color = \"#5b5d63\";\r\n  },\r\n  mounted: function () {\r\n    //查询活动列表并生成到this.activities\r\n    this.QueryActivity();\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.activities_box {\r\n  width: 1300px;\r\n  position: relative;\r\n  margin: 30px auto;\r\n\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}