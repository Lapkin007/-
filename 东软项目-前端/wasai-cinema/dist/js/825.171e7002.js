"use strict";(self["webpackChunkwasai_cinema"]=self["webpackChunkwasai_cinema"]||[]).push([[825],{1825:function(e,t,l){l.r(t),l.d(t,{default:function(){return F}});var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"outbox"},[l("div",{staticClass:"header"},[l("el-row",[l("el-col",{staticClass:"header-item",attrs:{span:3}},[e._v("电影ID")]),l("el-col",{staticClass:"header-item",staticStyle:{"padding-left":"0px"},attrs:{span:7}},[e._v("电影名")]),l("el-col",{staticClass:"header-item",staticStyle:{"padding-left":"0px"},attrs:{span:1}},[e._v("状态")]),l("el-col",{staticClass:"header-item",staticStyle:{"padding-left":"70px"},attrs:{span:4}},[e._v("地区/类型")]),l("el-col",{staticClass:"header-item",staticStyle:{"padding-left":"170px"},attrs:{span:9}},[e._v("操作")])],1)],1),l("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.userlist,(function(t,i){return l("el-collapse-item",{key:i,staticStyle:{"border-bottom":"1px solid black"},attrs:{name:i,disabled:""}},[l("template",{slot:"title"},[l("el-row",{staticStyle:{"background-color":"white",width:"1800px",height:"48px"}},[l("el-col",{staticClass:"order-box-item1",attrs:{span:3}},[e._v(e._s(t.id))]),l("el-col",{staticClass:"order-box-item1",staticStyle:{overflow:"hidden",width:"370px",height:"50px"},attrs:{span:7}},[e._v(e._s(t.name))]),l("el-col",{staticClass:"order-box-item1",attrs:{span:2}},[e._v(e._s(t.status))]),l("el-col",{staticClass:"order-box-item1",attrs:{span:3}},[e._v(e._s(t.region)+"/"+e._s(t.type))]),l("el-col",{staticClass:"order-box-item3",attrs:{span:9}},[l("el-button",{staticClass:"wait1",on:{click:function(t){return e.UpdateUserData(i)}}},[e._v("修改电影信息")]),l("el-button",{staticClass:"fail1",on:{click:function(t){return e.DeleteUser(i)}}},[e._v(" 删除电影")]),l("el-button",{staticClass:"PadButton",on:{click:function(t){return e.changePad(i)}}},[e._v(" 展开收起")])],1)],1)],1),l("div",{staticClass:"collapse-panel-item"},[e._v("电影ID:"+e._s(t.id))]),l("div",{staticClass:"collapse-panel-item"},[e._v("电影名字:"+e._s(t.name))]),l("div",{staticClass:"collapse-panel-item"},[e._v("电影热度:"+e._s(t.hot))]),l("div",{staticClass:"collapse-panel-item"},[e._v("电影发布日期:"+e._s(t.releaseTime))]),l("div",{staticClass:"collapse-panel-item"},[e._v("电影头像URL:"+e._s(t.cover))]),l("img",{staticStyle:{"margin-left":"30px",width:"100px",height:"150px"},attrs:{src:t.cover}}),l("div",{staticClass:"collapse-panel-item"},[e._v("类型:"+e._s(t.type))]),l("div",{staticClass:"collapse-panel-item"},[e._v("地区:"+e._s(t.region))]),l("div",{staticClass:"collapse-panel-item"},[e._v("时长:"+e._s(t.duration))]),l("div",{staticClass:"collapse-panel-item"},[e._v("简介:"+e._s(t.introduction))]),l("div",{staticClass:"collapse-panel-item"},[e._v("创建时间:"+e._s(t.createTime))]),l("div",{staticClass:"collapse-panel-item"},[e._v("是否删除(1:被删除,0:没被删除):"+e._s(t.isDelete))]),l("div",{staticClass:"collapse-panel-item"},[e._v("是否上架(1:上架,0:下架):"+e._s(t.status))])],2)})),1),l("el-dialog",{attrs:{title:"确定删除吗?此操作不可撤销",visible:e.DeleteVisible},on:{"update:visible":function(t){e.DeleteVisible=t}}},[l("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.DeleteOneUser()}}},[e._v("确定删除")]),l("el-button",{on:{click:function(t){e.DeleteVisible=!1}}},[e._v("取消")])],1),l("el-dialog",{attrs:{title:"修改电影信息",visible:e.UpdateFormVisible},on:{"update:visible":function(t){e.UpdateFormVisible=t}}},[l("el-form",{ref:"form",attrs:{model:e.FilmForm,"label-width":"80px"}},[l("div",[l("div",{staticClass:"inputLabel"},[l("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("电影名")]),l("el-input",{staticClass:"inputBox",attrs:{placeholder:"请输入电影名"},model:{value:e.FilmForm.name,callback:function(t){e.$set(e.FilmForm,"name",t)},expression:" FilmForm.name"}})],1),l("div",{staticClass:"inputLabel",staticStyle:{width:"500px",position:"relative"}},[l("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("发布日期"),l("br"),l("el-date-picker",{staticClass:"inputBox",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.FilmForm.releaseTime,callback:function(t){e.$set(e.FilmForm,"releaseTime",t)},expression:"FilmForm.releaseTime"}})],1),l("div",[l("div",{staticClass:"inputLabel"},[l("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("电影时长")]),l("el-input",{staticClass:"inputBox",attrs:{placeholder:"请输入电影时长"},model:{value:e.FilmForm.duration,callback:function(t){e.$set(e.FilmForm,"duration",t)},expression:" FilmForm.duration"}})],1),l("div",[l("div",{staticClass:"inputLabel"},[l("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("热度值")]),l("el-input",{staticClass:"inputBox",attrs:{placeholder:"请输入电影热度值"},model:{value:e.FilmForm.hot,callback:function(t){e.$set(e.FilmForm,"hot",t)},expression:" FilmForm.hot"}})],1),l("div",[l("div",{staticClass:"inputLabel",staticStyle:{"margin-right":"10px"}},[l("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("类型")]),l("el-radio",{attrs:{label:"家庭"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("家庭")]),l("el-radio",{attrs:{label:"惊悚"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("惊悚")]),l("el-radio",{attrs:{label:"科幻"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("科幻")]),l("el-radio",{attrs:{label:"爱情"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("爱情")]),l("el-radio",{attrs:{label:"动作"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("动作")]),l("el-radio",{attrs:{label:"喜剧"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("喜剧")]),l("el-radio",{attrs:{label:"恐怖"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("恐怖")]),l("el-radio",{attrs:{label:"悬疑"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("悬疑")]),l("el-radio",{attrs:{label:"犯罪"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("犯罪")]),l("el-radio",{attrs:{label:"冒险"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("冒险")]),l("el-radio",{attrs:{label:"战争"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("战争")]),l("el-radio",{attrs:{label:"历史"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("历史")]),l("el-radio",{attrs:{label:"武侠"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("武侠")]),l("el-radio",{attrs:{label:"古装"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("古装")]),l("el-radio",{attrs:{label:"其他"},model:{value:e.FilmForm.type,callback:function(t){e.$set(e.FilmForm,"type",t)},expression:"FilmForm.type"}},[e._v("其他")])],1),l("div",[l("div",{staticClass:"inputLabel",staticStyle:{"margin-right":"10px"}},[l("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("地区")]),l("el-radio",{attrs:{label:"内地"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("内地")]),l("el-radio",{attrs:{label:"香港"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("香港")]),l("el-radio",{attrs:{label:"台湾"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("台湾")]),l("el-radio",{attrs:{label:"美国"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("美国")]),l("el-radio",{attrs:{label:"韩国"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("韩国")]),l("el-radio",{attrs:{label:"日本"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("日本")]),l("el-radio",{attrs:{label:"泰国"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("泰国")]),l("el-radio",{attrs:{label:"印度"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("印度")]),l("el-radio",{attrs:{label:"法国"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("法国")]),l("el-radio",{attrs:{label:"英国"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("英国")]),l("el-radio",{attrs:{label:"德国"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("德国")]),l("el-radio",{attrs:{label:"其他"},model:{value:e.FilmForm.region,callback:function(t){e.$set(e.FilmForm,"region",t)},expression:"FilmForm.region"}},[e._v("其他")])],1),l("el-form-item",[l("div",[l("div",{staticClass:"inputLabel",staticStyle:{left:"-90px",position:"relative"}},[l("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("电影简介")])]),l("el-input",{staticStyle:{width:"500px",position:"relative"},attrs:{type:"textarea"},model:{value:e.FilmForm.info,callback:function(t){e.$set(e.FilmForm,"info",t)},expression:"FilmForm.info"}})],1),l("el-form-item",[l("p",[e._v("状态")]),l("el-radio-group",{model:{value:e.FilmForm.status,callback:function(t){e.$set(e.FilmForm,"status",t)},expression:"FilmForm.status"}},[l("el-radio",{attrs:{label:"1"}},[e._v("上架")]),l("el-radio",{attrs:{label:"0"}},[e._v("下架")])],1)],1),l("el-form-item",[l("p",[e._v("是否删除")]),l("el-radio-group",{model:{value:e.FilmForm.Isdelete,callback:function(t){e.$set(e.FilmForm,"Isdelete",t)},expression:"FilmForm.Isdelete"}},[l("el-radio",{attrs:{label:"1"}},[e._v("删除")]),l("el-radio",{attrs:{label:"0"}},[e._v("不删除")])],1)],1),l("el-form-item",[l("div",{staticClass:"picture"},[l("div",[l("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://47.115.220.25:8081/api/user/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?l("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):l("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),l("p",[e._v("只能上传jpg/png图片")]),l("p",[e._v("不能带有特殊符号")])])]),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit2()}}},[e._v("更新基本信息")]),l("el-button",{on:{click:function(t){e.UpdateFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},a=[],s=l(9254),o=l(6580),r={data(){return{imageUrl:null,dynamicValidateForm:{domains:[{value:null}],email:null},ruleForm:{pass:null},FilmForm:{status:null,name:null,releaseTime:null,type:"其他",region:"其他",info:null,duration:null,Isdelete:null,hot:null},fileName:null,activeNames:[],userlist:[],UpdateIndex:-1,UpdateFormVisible:!1,DeleteVisible:!1}},methods:{beforeAvatarUpload(e){const t="image/jpeg"===e.type,l="image/png"===e.type,i=e.size/2048/2048<2;return!t&!l&&this.$message.error("上传海报图片只能是 JPG 或者 PNG 格式!"),i||this.$message.error("上传海报图片大小不能超过 8MB!"),l&t&&i},handleAvatarSuccess(e,t){console.log(e.data.fileName),this.fileName=e.data.fileName,this.imageUrl=URL.createObjectURL(t.raw)},onSubmit2(){if("1"==this.FilmForm.status)var e=1;if("0"==this.FilmForm.status)e=0;let t={hot:this.FilmForm.hot,isDelete:this.FilmForm.Isdelete,cover:this.fileName,name:this.FilmForm.name,status:e,releaseTime:this.FilmForm.releaseTime,type:this.FilmForm.type,region:this.FilmForm.region,introduction:this.FilmForm.info,duration:this.FilmForm.duration,cover:this.fileName,id:this.userlist[this.UpdateIndex].id,updateTime:new Date,createTime:null};console.log(t),null!=this.FilmForm.name&&t.name.length<2?this.$message.error("请输入2位以上的电影名称"):(0,o.D9)(t).then((e=>{200==e.code?"success"==e.data.success?(this.$message({message:e.data.msg,type:e.data.success}),this.UpdateFormVisible=!1):this.$message.error("更新失败"):this.$message.error("请求失败")}))},beforeAvatarUpload(e){const t="image/jpeg"===e.type,l="image/png"===e.type,i=e.size/4096/4096<2;return!t&!l&&this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式!"),i||this.$message.error("上传头像图片大小不能超过 16MB!"),l&t&&i},handleAvatarSuccess(e,t){console.log(e.data.fileName),this.fileName=e.data.fileName,this.imageUrl=URL.createObjectURL(t.raw)},DeleteOneUser(){(0,o.Oi)(this.userlist[this.UpdateIndex].id).then((e=>{200==e.code?"success"==e.data.success?(this.$message({message:"删除成功",type:e.data.success}),this.DeleteVisible=!1,this.userlist.splice(this.UpdateIndex,1)):this.$message.error("删除失败"):this.$message.error("请求失败")}))},UpdateUserData(e){this.UpdateFormVisible=!0,this.UpdateIndex=e,this.FilmForm.type=this.userlist[this.UpdateIndex].type,this.FilmForm.region=this.userlist[this.UpdateIndex].region},changePad:function(e){-1==this.activeNames.indexOf(e)?this.activeNames.push(e):this.activeNames.splice(this.activeNames.indexOf(e),1)},DeleteUser(e){this.DeleteVisible=!0,this.UpdateIndex=e},QueryAlluser(){(0,o.VM)().then((e=>{if(200==e.code){this.userlist=e.data;for(var t=0;t<this.userlist.length;t++)this.userlist[t].createTime=(0,s.T)(new Date(this.userlist[t].createTime)),this.userlist[t].releaseTime=(0,s.T)(new Date(this.userlist[t].releaseTime))}}))}},created:function(){this.QueryAlluser()}},m=r,n=l(1001),c=(0,n.Z)(m,i,a,!1,null,"50054a18",null),F=c.exports}}]);
//# sourceMappingURL=825.171e7002.js.map