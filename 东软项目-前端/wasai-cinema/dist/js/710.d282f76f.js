"use strict";(self["webpackChunkwasai_cinema"]=self["webpackChunkwasai_cinema"]||[]).push([[710],{8710:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"outbox"},[s("div",{staticClass:"header"},[s("el-row",[s("el-col",{staticClass:"header-item",attrs:{span:5}},[e._v("场次ID")]),s("el-col",{staticClass:"header-item",staticStyle:{"padding-left":"0px"},attrs:{span:4}},[e._v("场次电影")]),s("el-col",{staticClass:"header-item",staticStyle:{"padding-left":"70px"},attrs:{span:4}},[e._v("日期")]),s("el-col",{staticClass:"header-item",staticStyle:{"padding-left":"170px"},attrs:{span:11}},[e._v("操作")])],1)],1),s("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.userlist,(function(t,i){return s("el-collapse-item",{key:i,staticStyle:{"border-bottom":"1px solid black"},attrs:{name:i,disabled:""}},[s("template",{slot:"title"},[s("el-row",{staticStyle:{"background-color":"white",width:"1800px",height:"48px"}},[s("el-col",{staticClass:"order-box-item1",attrs:{span:5}},[e._v(e._s(t.Arr.id))]),s("el-col",{staticClass:"order-box-item1",staticStyle:{overflow:"hidden",width:"250px",height:"50px"},attrs:{span:5}},[e._v(e._s(t.Arr.name))]),s("el-col",{staticClass:"order-box-item1",attrs:{span:5}},[e._v(e._s(t.Arr.date)+"-"+e._s(t.Arr.startTime))]),s("el-col",{staticClass:"order-box-item3",attrs:{span:8}},[s("el-button",{staticClass:"wait1",on:{click:function(t){return e.UpdateUserData(i)}}},[e._v("修改场次信息")]),s("el-button",{staticClass:"fail1",on:{click:function(t){return e.DeleteUser(i)}}},[e._v(" 删除场次")]),s("el-button",{staticClass:"PadButton",on:{click:function(t){return e.changePad(i)}}},[e._v(" 展开收起")])],1)],1)],1),s("div",{staticClass:"collapse-panel-item"},[e._v("场次ID:"+e._s(t.Arr.id))]),s("div",{staticClass:"collapse-panel-item"},[e._v("场次电影ID:"+e._s(t.Film.id))]),s("div",{staticClass:"collapse-panel-item"},[e._v("场次电影名字:"+e._s(t.Film.name))]),s("div",{staticClass:"collapse-panel-item"},[e._v("场次中已购座位:"+e._s(t.Seats))]),s("div",{staticClass:"collapse-panel-item"},[e._v("放映类型:"+e._s(t.Arr.type))]),s("img",{staticStyle:{"margin-left":"30px",width:"100px",height:"140px"},attrs:{src:t.Film.cover}}),s("div",{staticClass:"collapse-panel-item"},[e._v("场次开始时间:"+e._s(t.Arr.startTime))]),s("div",{staticClass:"collapse-panel-item"},[e._v("场次结束时间:"+e._s(t.Arr.endTime))]),s("div",{staticClass:"collapse-panel-item"},[e._v("创建时间:"+e._s(t.Arr.createTime))]),s("div",{staticClass:"collapse-panel-item"},[e._v("创建人:"+e._s(t.Arr.founder))])],2)})),1),s("el-dialog",{attrs:{title:"确定删除吗?此操作不可撤销",visible:e.DeleteVisible},on:{"update:visible":function(t){e.DeleteVisible=t}}},[s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.DeleteOneUser()}}},[e._v("确定删除")]),s("el-button",{on:{click:function(t){e.DeleteVisible=!1}}},[e._v("取消")])],1),s("el-dialog",{attrs:{title:"修改场次信息",visible:e.UpdateFormVisible},on:{"update:visible":function(t){e.UpdateFormVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[s("el-form-item",[s("p",{staticStyle:{display:"block"}},[e._v("场次显示的电影名称")]),s("el-input",{staticStyle:{display:"inline-block",width:"300px"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),s("el-form-item",{attrs:{prop:"pass"}},[s("p",[e._v("总座位(只能往大调整,如果要减少座位，请删除排片)")]),s("el-input",{staticStyle:{width:"300px"},attrs:{type:"text",autocomplete:"off"},model:{value:e.form.seatNum,callback:function(t){e.$set(e.form,"seatNum",t)},expression:"form.seatNum"}})],1),s("el-form-item",[s("p",{staticStyle:{display:"block"}},[e._v("类型")]),s("el-input",{staticStyle:{display:"inline-block",width:"300px"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),s("el-form-item",[s("p",[e._v("电影日期")]),s("el-col",{attrs:{span:11}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1),s("el-form-item",[s("p",{staticStyle:{display:"block"}},[e._v("价格")]),s("el-input",{staticStyle:{display:"inline-block",width:"300px"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),s("el-form-item",[s("p",{staticStyle:{display:"block"}},[e._v("开始时间")]),s("el-input",{staticStyle:{display:"inline-block",width:"300px"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),s("el-form-item",[s("p",{staticStyle:{display:"block"}},[e._v("结束时间")]),s("el-input",{staticStyle:{display:"inline-block",width:"300px"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit2()}}},[e._v("更新基本信息")]),s("el-button",{on:{click:function(t){e.UpdateFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},l=[],a=s(6580),r=(s(6165),s(9254)),n={data(){return{imageUrl:null,dynamicValidateForm:{domains:[{value:null}],email:null},ruleForm:{pass:null,seatNum:null},form:{type:null,nickname:null,price:null,date:null,startTime:null,endTime:null,seatNum:null},fileName:null,activeNames:[],userlist:[],UpdateIndex:-1,UpdateFormVisible:!1,DeleteVisible:!1,newlist:[]}},methods:{onSubmit2(){let e={seatNumber:this.form.seatNum,name:this.form.nickname,price:this.form.price,type:this.form.type,date:this.form.date,startTime:this.form.startTime,endTime:this.form.endTime,id:this.userlist[this.UpdateIndex].Arr.id,founder:null,boxOffice:null,fid:null,createTime:null};console.log(e),null!=this.ruleForm.pass&&this.ruleForm.pass<6?this.$message.error("请输入6位以上的密码"):(0,a.sj)(e).then((e=>{200==e.code?"success"==e.data.success?(this.$message({message:e.data.msg,type:e.data.success}),this.UpdateFormVisible=!1):this.$message.error("更新失败"):this.$message.error("请求失败")}))},beforeAvatarUpload(e){const t="image/jpeg"===e.type,s="image/png"===e.type,i=e.size/2048/2048<2;return!t&!s&&this.$message.error("上传头像图片只能是 JPG 或者 PNG 格式!"),i||this.$message.error("上传头像图片大小不能超过 8MB!"),s&t&&i},handleAvatarSuccess(e,t){console.log(e.data.fileName),this.fileName=e.data.fileName,this.imageUrl=URL.createObjectURL(t.raw)},DeleteOneUser(){(0,a.pe)(this.userlist[this.UpdateIndex].Arr.id).then((e=>{200==e.code?"success"==e.data.success?(this.$message({message:"删除成功",type:e.data.success}),this.DeleteVisible=!1,this.userlist.splice(this.UpdateIndex,1)):(this.$message.error("删除失败"),this.DeleteVisible=!1):(this.$message.error("请求失败"),this.DeleteVisible=!1)}))},UpdateUserData(e){this.UpdateFormVisible=!0,this.UpdateIndex=e,console.log(this.newlist),this.form.price=this.userlist[e].Arr.price,this.form.type=this.userlist[e].Arr.type,this.form.startTime=this.userlist[e].Arr.startTime,this.form.seatNum=this.userlist[e].Arr.seatNumber,this.form.endTime=this.userlist[e].Arr.endTime,this.form.nickname=this.userlist[e].Arr.name},changePad:function(e){-1==this.activeNames.indexOf(e)?this.activeNames.push(e):this.activeNames.splice(this.activeNames.indexOf(e),1)},DeleteUser(e){this.DeleteVisible=!0,this.UpdateIndex=e},QueryAlluser(){(0,a.RF)().then((e=>{if(200==e.code){this.userlist=e.data;for(var t=0;t<this.userlist.length;t++)this.userlist[t].Arr.createTime=(0,r.T)(new Date(this.userlist[t].Arr.createTime)),this.userlist[t].Arr.date=(0,r.T)(new Date(this.userlist[t].Arr.date),"{y}-{m}-{d}")}}))}},created:function(){this.QueryAlluser()}},o=n,c=s(1001),m=(0,c.Z)(o,i,l,!1,null,"19ccd7bd",null),d=m.exports}}]);
//# sourceMappingURL=710.d282f76f.js.map